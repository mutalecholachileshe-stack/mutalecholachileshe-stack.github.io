<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trustay | Monthly Living Without Fear</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ===== TRUSTAY DESIGN SYSTEM ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Trustay Blue Palette */
            --royal-blue: #0B1F3B;
            --deep-blue: #102A44;
            --accent-blue: #2563EB;
            --trust-green: #10B981;
            --warning-orange: #F59E0B;
            --soft-white: #FFFFFF;
            --light-bg: #F8FAFC;
            --border-soft: rgba(11, 31, 59, 0.08);
            --text-primary: #0B1F3B;
            --text-secondary: rgba(11, 31, 59, 0.6);
            --text-tertiary: rgba(11, 31, 59, 0.4);
            
            /* Shadows */
            --shadow-soft: 0 8px 30px rgba(11, 31, 59, 0.08);
            --shadow-medium: 0 15px 35px rgba(11, 31, 59, 0.12);
            --shadow-large: 0 20px 40px rgba(11, 31, 59, 0.15);
            
            /* Spacing */
            --space-xs: 8px;
            --space-sm: 16px;
            --space-md: 24px;
            --space-lg: 40px;
            --space-xl: 60px;
            
            /* Radius */
            --radius-sm: 8px;
            --radius: 16px;
            --radius-lg: 24px;
            --radius-xl: 32px;
            
            /* Font */
            --font-body: 'Manrope', sans-serif;
            
            /* Transitions */
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        body {
            font-family: var(--font-body);
            background: var(--soft-white);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* ===== TRUSTAY INTRO SCREENS ===== */
        #brand-intro {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--soft-white);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOut 1.5s ease forwards;
            animation-delay: 1.5s;
        }

        #brand-intro h1 {
            font-size: 56px;
            font-weight: 800;
            color: var(--deep-blue);
            margin-bottom: var(--space-xs);
            letter-spacing: -1px;
        }

        #brand-intro p {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent-blue);
            opacity: 0.8;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        #screen-hero {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6)),
                url('https://images.unsplash.com/photo-1560448204-603b3fc33ddc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1800&q=80');
            background-size: cover;
            background-position: center;
            display: none;
            flex-direction: column;
            padding: var(--space-lg);
        }

        #screen-hero.active {
            display: flex;
        }

        .hero-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            max-width: 100%;
        }

        .hero-text {
            color: white;
            max-width: 600px;
            width: 100%;
        }

        .hero-headline {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: var(--space-md);
            line-height: 1.1;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .hero-description {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: var(--space-lg);
            line-height: 1.6;
        }

        .trust-pill {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-md);
            font-size: 14px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .glass-button {
            padding: var(--space-md) var(--space-lg);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid var(--border-soft);
            backdrop-filter: blur(12px);
            color: var(--deep-blue);
            border-radius: var(--radius);
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: inline-flex;
            align-items: center;
            gap: 12px;
            min-width: 200px;
            justify-content: center;
        }

        .glass-button:hover {
            transform: translateY(-3px);
            background: var(--soft-white);
            box-shadow: var(--shadow-large);
        }

        .button-group {
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
            margin-top: var(--space-md);
        }

        /* ===== APP CONTAINER ===== */
        #app {
            display: none;
            width: 100%;
            height: 100vh;
            max-width: 480px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            background: var(--soft-white);
            box-shadow: var(--shadow-large);
        }

        #app.active {
            display: block;
        }

        /* ===== APP SCREENS ===== */
        .app-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--soft-white);
            overflow-y: auto;
            overflow-x: hidden;
            display: none;
            padding-bottom: 80px;
            -webkit-overflow-scrolling: touch;
        }

        .app-screen.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        /* ===== APP HEADER ===== */
        .app-header {
            padding: var(--space-sm) var(--space-md);
            background: var(--soft-white);
            border-bottom: 1px solid var(--border-soft);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }

        .logo-small {
            font-size: 24px;
            font-weight: 800;
            color: var(--deep-blue);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-subtitle {
            font-size: 11px;
            color: var(--accent-blue);
            font-weight: 700;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        .back-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--soft-white);
            border: 1px solid var(--border-soft);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
            flex-shrink: 0;
        }

        .back-btn:hover {
            background: var(--light-bg);
            transform: scale(1.05);
        }

        .header-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--deep-blue);
            text-align: center;
            flex: 1;
        }

        /* ===== DASHBOARD ===== */
        .dashboard-header {
            background: linear-gradient(135deg, var(--deep-blue) 0%, var(--accent-blue) 100%);
            color: white;
            padding: var(--space-xl) var(--space-md) var(--space-lg);
            border-radius: 0 0 var(--radius-xl) var(--radius-xl);
            position: relative;
            overflow: hidden;
        }

        .dashboard-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }

        .greeting {
            margin-bottom: var(--space-lg);
            position: relative;
            z-index: 1;
        }

        .greeting h2 {
            font-size: 1.8rem;
            margin-bottom: var(--space-xs);
            font-weight: 800;
        }

        .greeting p {
            opacity: 0.9;
            font-size: 16px;
        }

        .search-box {
            background: var(--soft-white);
            border-radius: var(--radius-lg);
            padding: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            box-shadow: var(--shadow-soft);
            position: relative;
            z-index: 1;
            transition: all var(--transition-normal);
        }

        .search-box:focus-within {
            box-shadow: var(--shadow-medium);
            transform: translateY(-1px);
        }

        .search-box input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 16px;
            color: var(--text-primary);
            background: transparent;
            font-weight: 500;
        }

        .search-box input::placeholder {
            color: var(--text-tertiary);
        }

        .dashboard-content {
            padding: var(--space-md);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .stat-card {
            background: var(--soft-white);
            border-radius: var(--radius);
            padding: var(--space-sm);
            text-align: center;
            border: 1px solid var(--border-soft);
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
            border-color: var(--accent-blue);
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--deep-blue);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* ===== TRUST BADGES ===== */
        .trust-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: var(--space-sm) 0;
        }

        .trust-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(16, 185, 129, 0.1);
            color: var(--trust-green);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            white-space: nowrap;
        }

        .trust-badge.blue {
            background: rgba(37, 99, 235, 0.1);
            color: var(--accent-blue);
        }

        .trust-badge.orange {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-orange);
        }

        /* ===== PROPERTY CARD ===== */
        .properties-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-md);
        }

        .property-card {
            background: var(--soft-white);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--border-soft);
            box-shadow: var(--shadow-soft);
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
        }

        .property-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-medium);
            border-color: var(--accent-blue);
        }

        .property-image {
            height: 200px;
            width: 100%;
            background-size: cover;
            background-position: center;
            position: relative;
            transition: transform 0.5s ease;
        }

        .property-card:hover .property-image {
            transform: scale(1.05);
        }

        .property-content {
            padding: var(--space-md);
        }

        .property-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
            line-height: 1.4;
        }

        .property-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--deep-blue);
            margin-top: var(--space-sm);
        }

        .property-meta {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: var(--space-sm);
        }

        .property-meta i {
            color: var(--accent-blue);
        }

        .transport-tag {
            position: absolute;
            bottom: var(--space-sm);
            right: var(--space-sm);
            background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            z-index: 2;
        }

        .save-button {
            position: absolute;
            top: var(--space-sm);
            right: var(--space-sm);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.95);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-blue);
            cursor: pointer;
            z-index: 2;
            transition: all var(--transition-normal);
            box-shadow: var(--shadow-soft);
        }

        .save-button:hover {
            transform: scale(1.1);
            background: white;
        }

        .save-button.saved {
            color: #EF4444;
        }

        /* ===== FORM STYLES ===== */
        .form-section {
            background: var(--soft-white);
            border-radius: var(--radius);
            padding: var(--space-lg);
            margin: var(--space-md);
            border: 1px solid var(--border-soft);
            box-shadow: var(--shadow-soft);
        }

        .form-group {
            margin-bottom: var(--space-md);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-xs);
            font-weight: 700;
            color: var(--text-primary);
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: var(--space-md);
            border: 2px solid var(--border-soft);
            border-radius: var(--radius);
            font-size: 16px;
            background: var(--soft-white);
            transition: all var(--transition-normal);
            font-family: var(--font-body);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
            color: white;
            border: none;
            padding: var(--space-md);
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all var(--transition-normal);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 16px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
            padding: var(--space-md);
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all var(--transition-normal);
        }

        .btn-secondary:hover {
            background: rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
        }

        /* ===== TRANSPORT CARD ===== */
        .transport-card {
            background: var(--soft-white);
            border: 2px solid var(--border-soft);
            border-radius: var(--radius);
            padding: var(--space-md);
            margin: var(--space-sm) 0;
            display: flex;
            align-items: center;
            gap: var(--space-md);
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .transport-card:hover {
            border-color: var(--accent-blue);
            transform: translateX(4px);
            box-shadow: var(--shadow-soft);
        }

        .transport-card.selected {
            border-color: var(--accent-blue);
            background: rgba(37, 99, 235, 0.05);
        }

        .transport-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.4rem;
            flex-shrink: 0;
        }

        .transport-details {
            flex: 1;
        }

        .transport-details h4 {
            margin-bottom: 6px;
            color: var(--text-primary);
            font-weight: 700;
        }

        .transport-details p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: var(--space-xs);
        }

        .transport-price {
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--deep-blue);
        }

        /* ===== BOOKING FLOW ===== */
        .booking-step {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .booking-step.active {
            display: block;
        }

        .booking-header {
            text-align: center;
            margin-bottom: var(--space-lg);
            padding: 0 var(--space-md);
        }

        .booking-header h2 {
            color: var(--deep-blue);
            margin-bottom: var(--space-xs);
            font-size: 1.8rem;
        }

        .booking-header p {
            color: var(--text-secondary);
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
            padding: 0 var(--space-md);
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-xs);
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--light-bg);
            border: 2px solid var(--border-soft);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--text-secondary);
            transition: all var(--transition-normal);
        }

        .step.active .step-circle {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        .step.completed .step-circle {
            background: var(--trust-green);
            border-color: var(--trust-green);
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .step.active .step-label {
            color: var(--accent-blue);
        }

        .booking-summary {
            background: var(--light-bg);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin: var(--space-lg) 0;
            border: 2px solid var(--border-soft);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--border-soft);
            font-size: 16px;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-item.total {
            font-weight: 800;
            color: var(--text-primary);
            font-size: 1.2rem;
            padding-top: var(--space-md);
            margin-top: var(--space-sm);
            border-top: 2px solid var(--border-soft);
        }

        .booking-actions {
            display: flex;
            gap: var(--space-sm);
            margin-top: var(--space-lg);
        }

        .booking-actions .btn-primary,
        .booking-actions .btn-secondary {
            flex: 1;
        }

        /* ===== OWNER DASHBOARD ===== */
        .owner-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm);
            margin: var(--space-lg) 0;
        }

        .owner-action-card {
            background: var(--soft-white);
            border: 2px solid var(--border-soft);
            border-radius: var(--radius);
            padding: var(--space-md);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
        }

        .owner-action-card:hover {
            transform: translateY(-3px);
            border-color: var(--accent-blue);
            box-shadow: var(--shadow-soft);
        }

        .owner-action-card i {
            font-size: 2rem;
            color: var(--accent-blue);
        }

        .owner-action-card h4 {
            color: var(--text-primary);
            font-weight: 700;
            margin: 0;
        }

        .owner-action-card p {
            color: var(--text-secondary);
            font-size: 12px;
            margin: 0;
        }

        .property-list {
            background: var(--soft-white);
            border-radius: var(--radius);
            border: 1px solid var(--border-soft);
            overflow: hidden;
            margin: var(--space-md) 0;
        }

        .property-list-item {
            display: flex;
            align-items: center;
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-soft);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .property-list-item:last-child {
            border-bottom: none;
        }

        .property-list-item:hover {
            background: var(--light-bg);
        }

        .property-list-image {
            width: 80px;
            height: 80px;
            border-radius: var(--radius);
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
            margin-right: var(--space-md);
        }

        .property-list-details {
            flex: 1;
        }

        .property-list-details h4 {
            margin-bottom: var(--space-xs);
            color: var(--text-primary);
            font-weight: 700;
        }

        .property-list-details p {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: var(--space-xs);
        }

        .property-list-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            background: rgba(16, 185, 129, 0.1);
            color: var(--trust-green);
        }

        .property-list-status.pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-orange);
        }

        /* ===== EMPTY STATES ===== */
        .empty-state {
            text-align: center;
            padding: var(--space-xl) var(--space-md);
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: var(--space-md);
            color: var(--border-soft);
            opacity: 0.5;
        }

        .empty-state h3 {
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
            font-weight: 700;
        }

        .empty-state p {
            margin-bottom: var(--space-lg);
            max-width: 300px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        /* ===== TOAST NOTIFICATIONS ===== */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: var(--deep-blue);
            color: white;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius);
            z-index: 10000;
            animation: slideDown 0.3s ease forwards;
            box-shadow: var(--shadow-large);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            max-width: 90%;
            width: auto;
            white-space: nowrap;
        }

        .toast.success {
            background: var(--trust-green);
        }

        .toast.error {
            background: #EF4444;
        }

        .toast.warning {
            background: var(--warning-orange);
        }

        /* ===== MODAL ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(11, 31, 59, 0.7);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: var(--space-md);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: var(--soft-white);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-large);
            animation: slideUp 0.3s ease;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .modal-header h3 {
            color: var(--text-primary);
            font-weight: 800;
            margin: 0;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--light-bg);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: var(--border-soft);
            transform: rotate(90deg);
        }

        /* ===== BOTTOM NAV ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            max-width: 480px;
            padding: 12px var(--space-md);
            background: var(--soft-white);
            border-top: 2px solid var(--border-soft);
            display: none;
            justify-content: space-around;
            z-index: 1000;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.98);
        }

        .bottom-nav.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-tertiary);
            padding: 8px 12px;
            font-size: 11px;
            transition: all var(--transition-fast);
            border-radius: var(--radius);
            min-width: 60px;
        }

        .nav-item.active {
            color: var(--accent-blue);
            background: rgba(37, 99, 235, 0.08);
        }

        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 4px;
            transition: transform 0.2s ease;
        }

        .nav-item.active i {
            transform: scale(1.1);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes fadeOut {
            0% { opacity: 1; visibility: visible; }
            100% { opacity: 0; visibility: hidden; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* ===== LOADING STATES ===== */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 480px) {
            .hero-headline {
                font-size: 36px;
            }
            
            .hero-description {
                font-size: 16px;
            }
            
            #brand-intro h1 {
                font-size: 42px;
            }
            
            .dashboard-header {
                padding: var(--space-lg) var(--space-md) var(--space-md);
            }
            
            .form-section {
                margin: var(--space-sm);
                padding: var(--space-md);
            }
            
            .modal {
                padding: var(--space-md);
            }
        }

        /* ===== CUSTOM SCROLLBAR ===== */
        .app-screen::-webkit-scrollbar {
            width: 6px;
        }

        .app-screen::-webkit-scrollbar-track {
            background: var(--light-bg);
        }

        .app-screen::-webkit-scrollbar-thumb {
            background: var(--border-soft);
            border-radius: 3px;
        }

        .app-screen::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* ===== TYPOGRAPHY ENHANCEMENTS ===== */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 800;
            line-height: 1.2;
            color: var(--text-primary);
        }

        p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        a {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 600;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--deep-blue);
        }

        /* ===== UTILITY CLASSES ===== */
        .text-center {
            text-align: center;
        }

        .text-primary {
            color: var(--text-primary);
        }

        .text-secondary {
            color: var(--text-secondary);
        }

        .mb-sm {
            margin-bottom: var(--space-sm);
        }

        .mb-md {
            margin-bottom: var(--space-md);
        }

        .mb-lg {
            margin-bottom: var(--space-lg);
        }

        .mt-sm {
            margin-top: var(--space-sm);
        }

        .mt-md {
            margin-top: var(--space-md);
        }

        .mt-lg {
            margin-top: var(--space-lg);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .shake {
            animation: shake 0.5s ease;
        }

        /* ===== PROGRESS BAR ===== */
        .progress-bar {
            height: 6px;
            background: var(--light-bg);
            border-radius: 3px;
            overflow: hidden;
            margin: var(--space-md) 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), #3b82f6);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* ===== RATING STARS ===== */
        .rating {
            display: inline-flex;
            align-items: center;
            gap: 2px;
        }

        .rating-star {
            color: var(--warning-orange);
            font-size: 14px;
        }

        .rating-score {
            font-weight: 700;
            color: var(--text-primary);
            margin-left: 4px;
        }

        .rating-count {
            color: var(--text-secondary);
            font-size: 12px;
            margin-left: 4px;
        }

        /* ===== TAG INPUT ===== */
        .tag-input {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 12px;
            border: 2px solid var(--border-soft);
            border-radius: var(--radius);
            background: var(--soft-white);
            min-height: 52px;
            align-items: center;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(37, 99, 235, 0.1);
            color: var(--accent-blue);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .tag-remove {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            padding: 0;
            font-size: 14px;
            opacity: 0.7;
            transition: opacity 0.2s ease;
        }

        .tag-remove:hover {
            opacity: 1;
        }

        /* ===== DATE PICKER ===== */
        .date-picker {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: var(--space-sm);
        }

        .date-header {
            text-align: center;
            font-weight: 700;
            color: var(--text-secondary);
            font-size: 12px;
            padding: 8px 0;
        }

        .date-day {
            text-align: center;
            padding: 12px 0;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-weight: 600;
            color: var(--text-primary);
        }

        .date-day:hover {
            background: var(--light-bg);
        }

        .date-day.selected {
            background: var(--accent-blue);
            color: white;
        }

        .date-day.disabled {
            color: var(--text-tertiary);
            cursor: not-allowed;
        }

        .date-day.disabled:hover {
            background: transparent;
        }

        /* ===== PAYMENT METHODS ===== */
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-sm);
            margin: var(--space-md) 0;
        }

        .payment-method {
            padding: var(--space-md);
            border: 2px solid var(--border-soft);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .payment-method:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .payment-method.selected {
            border-color: var(--accent-blue);
            background: rgba(37, 99, 235, 0.05);
        }

        .payment-method i {
            font-size: 2rem;
            margin-bottom: var(--space-xs);
            color: var(--accent-blue);
        }

        .payment-method h4 {
            margin: 0 0 4px 0;
            font-size: 14px;
        }

        .payment-method p {
            margin: 0;
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* ===== REVIEWS ===== */
        .review-card {
            background: var(--soft-white);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius);
            padding: var(--space-md);
            margin: var(--space-sm) 0;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-sm);
        }

        .reviewer {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .reviewer-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .reviewer-info h4 {
            margin: 0 0 4px 0;
            font-size: 14px;
        }

        .reviewer-info p {
            margin: 0;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .review-content {
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
        }

        .review-date {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-top: var(--space-xs);
        }
    </style>
</head>
<body>
    <!-- Trustay Brand Intro -->
    <div id="brand-intro">
        <h1>TRUSTAY</h1>
        <p>MONTHLY LIVING WITHOUT FEAR</p>
    </div>

    <!-- Hero Screen -->
    <div id="screen-hero">
        <div class="hero-content">
            <div class="hero-text">
                <div class="trust-pill">
                    <i class="fas fa-shield-check"></i>
                    Verified Homes • Safe Transport • No Agent Fees
                </div>
                <h1 class="hero-headline">Monthly living, without fear.</h1>
                <p class="hero-description">
                    Zambia's trusted platform for students, workers, and young couples. 
                    Find safe, clean, verified monthly homes — with optional transport included.
                </p>
                <div class="button-group">
                    <button class="glass-button" id="get-started-btn">
                        Find My Home
                        <i class="fas fa-home"></i>
                    </button>
                    <button class="glass-button" onclick="showScreen('login')" style="background: rgba(255, 255, 255, 0.15); color: white; border-color: rgba(255, 255, 255, 0.3);">
                        <i class="fas fa-sign-in-alt"></i>
                        Sign In
                    </button>
                </div>
                <div style="margin-top: var(--space-xl); display: flex; align-items: center; gap: var(--space-md); flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 8px; color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                        <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                        <span>Zambian-owned & operated</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                        <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                        <span>24/7 customer support</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app">
        <!-- Bottom Navigation -->
        <nav class="bottom-nav" id="bottomNav">
            <a href="#" class="nav-item active" onclick="showScreen('dashboard')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#" class="nav-item" onclick="showScreen('transport')">
                <i class="fas fa-bus"></i>
                <span>Transport</span>
            </a>
            <a href="#" class="nav-item" onclick="showScreen('listings')">
                <i class="fas fa-search"></i>
                <span>Browse</span>
            </a>
            <a href="#" class="nav-item" onclick="showScreen('saved')">
                <i class="fas fa-heart"></i>
                <span>Saved</span>
            </a>
            <a href="#" class="nav-item" onclick="showScreen('profile')">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
        </nav>

        <!-- Login Screen -->
        <div class="app-screen" id="login-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('hero')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Trustay</div>
                <div style="width: 44px;"></div>
            </div>

            <div class="form-section">
                <div class="booking-header">
                    <h2>Welcome Back</h2>
                    <p>Sign in to your Trustay account</p>
                </div>
                
                <form id="loginForm" onsubmit="login(event)">
                    <div class="form-group">
                        <label class="form-label">Phone Number</label>
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="flex-shrink: 0; display: flex; align-items: center; gap: 6px; padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius); color: var(--text-primary); font-weight: 600;">
                                +260
                            </div>
                            <input type="tel" class="form-input" placeholder="97 123 4567" value="971234567" required maxlength="9" pattern="[0-9]{9}">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <div style="position: relative;">
                            <input type="password" class="form-input" placeholder="Enter your password" value="demo123" required id="loginPassword">
                            <button type="button" onclick="togglePassword('loginPassword')" style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--text-secondary); cursor: pointer;">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group" style="display: flex; justify-content: space-between; align-items: center;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" style="width: 18px; height: 18px;">
                            <span style="color: var(--text-secondary); font-size: 14px;">Remember me</span>
                        </label>
                        <a href="#" style="font-size: 14px; color: var(--accent-blue);">Forgot password?</a>
                    </div>
                    
                    <div class="trust-badges" style="margin: var(--space-lg) 0;">
                        <span class="trust-badge">
                            <i class="fas fa-lock"></i>
                            Secure login
                        </span>
                        <span class="trust-badge blue">
                            <i class="fas fa-mobile-alt"></i>
                            Zambian numbers
                        </span>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Sign In to Trustay
                    </button>
                </form>
                
                <div style="text-align: center; margin-top: var(--space-xl);">
                    <p style="color: var(--text-secondary); margin-bottom: var(--space-sm);">New to Trustay?</p>
                    <button class="btn-secondary" onclick="showScreen('register')">
                        <i class="fas fa-user-plus"></i> Create Free Account
                    </button>
                </div>
                
                <div style="margin-top: var(--space-xl); padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius);">
                    <p style="text-align: center; color: var(--text-secondary); font-size: 14px; margin-bottom: var(--space-sm);">
                        <i class="fas fa-info-circle"></i> Demo Account
                    </p>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-sm);">
                        <div style="text-align: center;">
                            <div style="font-size: 12px; color: var(--text-tertiary);">Phone</div>
                            <div style="font-weight: 700; color: var(--text-primary);">971234567</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 12px; color: var(--text-tertiary);">Password</div>
                            <div style="font-weight: 700; color: var(--text-primary);">demo123</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Screen -->
        <div class="app-screen" id="register-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('hero')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Trustay</div>
                <div style="width: 44px;"></div>
            </div>

            <div class="form-section">
                <div class="booking-header">
                    <h2>Join Trustay</h2>
                    <p>Create your free account</p>
                </div>
                
                <div class="step-indicator" style="margin-bottom: var(--space-lg);">
                    <div class="step active">
                        <div class="step-circle">1</div>
                        <div class="step-label">Account</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">2</div>
                        <div class="step-label">Details</div>
                    </div>
                    <div class="step">
                        <div class="step-circle">3</div>
                        <div class="step-label">Complete</div>
                    </div>
                </div>
                
                <form id="registerForm" onsubmit="register(event)">
                    <!-- Step 1: Account Type -->
                    <div class="booking-step active" id="registerStep1">
                        <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">I am a:</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-sm); margin-bottom: var(--space-lg);">
                            <div class="owner-action-card" onclick="selectRole('tenant', this)" data-selected="true">
                                <i class="fas fa-home"></i>
                                <h4>Tenant</h4>
                                <p>Looking for a home</p>
                            </div>
                            <div class="owner-action-card" onclick="selectRole('owner', this)">
                                <i class="fas fa-building"></i>
                                <h4>Owner</h4>
                                <p>Renting property</p>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-input" placeholder="John Banda" required>
                        </div>
                        
                        <button type="button" class="btn-primary" onclick="nextRegisterStep(2)">
                            Continue <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    
                    <!-- Step 2: Contact Details -->
                    <div class="booking-step" id="registerStep2">
                        <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Contact Details</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Phone Number</label>
                            <div style="display: flex; align-items: center; gap: var(--space-sm);">
                                <div style="flex-shrink: 0; display: flex; align-items: center; gap: 6px; padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius); color: var(--text-primary); font-weight: 600;">
                                    +260
                                </div>
                                <input type="tel" class="form-input" placeholder="97 123 4567" required maxlength="9" pattern="[0-9]{9}">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Email Address (Optional)</label>
                            <input type="email" class="form-input" placeholder="john@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Create Password</label>
                            <div style="position: relative;">
                                <input type="password" class="form-input" placeholder="At least 8 characters" required minlength="8" id="registerPassword">
                                <button type="button" onclick="togglePassword('registerPassword')" style="position: absolute; right: 16px; top: 50%; transform: translateY(-50%); background: none; border: none; color: var(--text-secondary); cursor: pointer;">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div style="margin-top: 8px;">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%;"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-top: 4px;">
                                    <span style="font-size: 12px; color: var(--text-secondary);">Password strength</span>
                                    <span style="font-size: 12px; color: var(--trust-green); font-weight: 600;">Good</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" class="form-input" placeholder="Re-enter your password" required>
                        </div>
                        
                        <div style="display: flex; gap: var(--space-sm); margin-top: var(--space-lg);">
                            <button type="button" class="btn-secondary" onclick="nextRegisterStep(1)">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <button type="button" class="btn-primary" onclick="nextRegisterStep(3)">
                                Continue <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Step 3: Complete Profile -->
                    <div class="booking-step" id="registerStep3">
                        <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Complete Profile</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Primary Location</label>
                            <select class="form-input" required>
                                <option value="">Select your area</option>
                                <option value="lusaka">Lusaka</option>
                                <option value="ndola">Ndola</option>
                                <option value="kitwe">Kitwe</option>
                                <option value="livingstone">Livingstone</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Institution/Workplace</label>
                            <select class="form-input" id="institutionSelect">
                                <option value="">Select if applicable</option>
                                <option value="unza">University of Zambia (UNZA)</option>
                                <option value="cbu">Copperbelt University (CBU)</option>
                                <option value="mu">Mulungushi University</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="otherInstitution" style="display: none;">
                            <label class="form-label">Specify Institution/Workplace</label>
                            <input type="text" class="form-input" placeholder="Enter name">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Monthly Budget (ZMW)</label>
                            <div style="display: flex; align-items: center; gap: var(--space-sm);">
                                <input type="range" min="500" max="3000" step="100" value="1500" class="form-input" style="padding: 0; flex: 1;">
                                <div style="font-weight: 700; color: var(--text-primary); min-width: 80px; text-align: right;">
                                    <span id="budgetValue">1500</span> ZMW
                                </div>
                            </div>
                        </div>
                        
                        <div class="trust-badges" style="margin: var(--space-lg) 0;">
                            <span class="trust-badge">
                                <i class="fas fa-user-check"></i>
                                Verified community
                            </span>
                            <span class="trust-badge blue">
                                <i class="fas fa-ban"></i>
                                No agent fees
                            </span>
                            <span class="trust-badge orange">
                                <i class="fas fa-shield-alt"></i>
                                24/7 support
                            </span>
                        </div>
                        
                        <div style="margin: var(--space-lg) 0; padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius);">
                            <label style="display: flex; align-items: flex-start; gap: var(--space-sm); cursor: pointer;">
                                <input type="checkbox" required style="margin-top: 2px; width: 18px; height: 18px; flex-shrink: 0;">
                                <span style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                    I agree to Trustay's 
                                    <a href="#" style="color: var(--accent-blue);">Terms of Service</a> 
                                    and 
                                    <a href="#" style="color: var(--accent-blue);">Privacy Policy</a>. 
                                    I understand that Trustay verifies all users for community safety.
                                </span>
                            </label>
                        </div>
                        
                        <div style="display: flex; gap: var(--space-sm);">
                            <button type="button" class="btn-secondary" onclick="nextRegisterStep(2)">
                                <i class="fas fa-arrow-left"></i> Back
                            </button>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-check"></i> Create Account
                            </button>
                        </div>
                    </div>
                </form>
                
                <div style="text-align: center; margin-top: var(--space-xl);">
                    <p style="color: var(--text-secondary);">Already have an account? <a href="#" onclick="showScreen('login')" style="font-weight: 700;">Sign In</a></p>
                </div>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div class="app-screen active" id="dashboard-screen">
            <div class="dashboard-header">
                <div class="greeting">
                    <h2 id="greeting-text">Good morning, John!</h2>
                    <p>Your safe home journey starts here</p>
                </div>
                <div class="search-box">
                    <i class="fas fa-search" style="color: var(--accent-blue);"></i>
                    <input type="text" placeholder="Search Woodlands, Ridgeway, UNZA..." id="searchInput" oninput="filterProperties()">
                    <button onclick="showScreen('listings')" style="background: none; border: none; color: var(--accent-blue); cursor: pointer;">
                        <i class="fas fa-filter"></i>
                    </button>
                </div>
            </div>

            <div class="dashboard-content">
                <!-- Trustay Guarantee Card -->
                <div style="background: linear-gradient(135deg, var(--deep-blue), var(--accent-blue)); color: white; border-radius: var(--radius-lg); padding: var(--space-md); margin-bottom: var(--space-lg); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -50px; right: -50px; width: 100px; height: 100px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
                    <div style="position: absolute; bottom: -30px; left: -30px; width: 60px; height: 60px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
                    <div style="position: relative; z-index: 1;">
                        <h3 style="margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-sm);">
                            <i class="fas fa-shield-check" style="color: var(--trust-green);"></i>
                            Trustay Guarantee
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-sm); font-size: 13px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-check-circle" style="color: var(--trust-green); font-size: 12px;"></i>
                                <span>Verified homes only</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-check-circle" style="color: var(--trust-green); font-size: 12px;"></i>
                                <span>No hidden fees</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-check-circle" style="color: var(--trust-green); font-size: 12px;"></i>
                                <span>Safe transport</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-check-circle" style="color: var(--trust-green); font-size: 12px;"></i>
                                <span>24/7 support</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card" onclick="showScreen('listings')">
                        <div class="stat-value" id="verified-homes">142</div>
                        <div class="stat-label">Verified Homes</div>
                    </div>
                    <div class="stat-card" onclick="showScreen('transport')">
                        <div class="stat-value" id="transport-routes">67</div>
                        <div class="stat-label">Transport Routes</div>
                    </div>
                    <div class="stat-card" onclick="showScreen('saved')">
                        <div class="stat-value" id="saved-count">5</div>
                        <div class="stat-label">Saved</div>
                    </div>
                </div>

                <!-- Featured Homes -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin: var(--space-lg) 0 var(--space-md);">
                    <h3 style="color: var(--text-primary); margin: 0;">Featured Homes</h3>
                    <a href="#" onclick="showScreen('listings')" style="color: var(--accent-blue); font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 4px;">
                        See all <i class="fas fa-arrow-right"></i>
                    </a>
                </div>

                <div class="properties-grid" id="featured-properties">
                    <!-- Properties loaded via JavaScript -->
                </div>

                <!-- Transport Quick Access -->
                <div style="margin-top: var(--space-xl);">
                    <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Trustay Transport</h3>
                    <div class="transport-card" onclick="showScreen('transport')">
                        <div class="transport-icon">
                            <i class="fas fa-bus"></i>
                        </div>
                        <div class="transport-details">
                            <h4>Safe Monthly Commutes</h4>
                            <p>Reliable routes to universities, colleges, and workplaces</p>
                            <div style="display: flex; gap: var(--space-sm); margin-top: var(--space-xs);">
                                <span class="trust-badge" style="font-size: 11px;">
                                    <i class="fas fa-clock"></i> Flexible times
                                </span>
                                <span class="trust-badge blue" style="font-size: 11px;">
                                    <i class="fas fa-shield-alt"></i> Verified drivers
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Owner Dashboard Screen -->
        <div class="app-screen" id="owner-dashboard-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Owner Dashboard</div>
                <button class="back-btn" onclick="showOwnerAddProperty()">
                    <i class="fas fa-plus"></i>
                </button>
            </div>

            <div class="dashboard-content">
                <!-- Owner Welcome Card -->
                <div style="background: linear-gradient(135deg, var(--trust-green), #34d399); color: white; border-radius: var(--radius-lg); padding: var(--space-lg); margin-bottom: var(--space-lg);">
                    <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-md);">
                        <div style="width: 60px; height: 60px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 4px;">Welcome, Owner!</h3>
                            <p style="opacity: 0.9; font-size: 14px;">Manage your properties and bookings</p>
                        </div>
                    </div>
                    <div style="display: flex; gap: var(--space-md);">
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 1.8rem; font-weight: 800;">3</div>
                            <div style="font-size: 12px; opacity: 0.9;">Properties</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 1.8rem; font-weight: 800;">5</div>
                            <div style="font-size: 12px; opacity: 0.9;">Bookings</div>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 1.8rem; font-weight: 800;">100%</div>
                            <div style="font-size: 12px; opacity: 0.9;">Verified</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Quick Actions</h3>
                <div class="owner-actions">
                    <div class="owner-action-card" onclick="showOwnerAddProperty()">
                        <i class="fas fa-plus-circle"></i>
                        <h4>List Property</h4>
                        <p>Add new home</p>
                    </div>
                    <div class="owner-action-card" onclick="showOwnerProperties()">
                        <i class="fas fa-home"></i>
                        <h4>My Properties</h4>
                        <p>3 listings</p>
                    </div>
                    <div class="owner-action-card" onclick="showOwnerBookings()">
                        <i class="fas fa-calendar-check"></i>
                        <h4>Bookings</h4>
                        <p>5 requests</p>
                    </div>
                    <div class="owner-action-card" onclick="showOwnerVerification()">
                        <i class="fas fa-badge-check"></i>
                        <h4>Verification</h4>
                        <p>Trustay Verified</p>
                    </div>
                </div>

                <!-- Recent Bookings -->
                <div style="margin-top: var(--space-xl);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
                        <h3 style="color: var(--text-primary); margin: 0;">Recent Bookings</h3>
                        <a href="#" onclick="showOwnerBookings()" style="color: var(--accent-blue); font-size: 14px; font-weight: 600;">
                            View all
                        </a>
                    </div>
                    <div id="owner-bookings-list">
                        <!-- Bookings loaded via JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Property Screen -->
        <div class="app-screen" id="owner-add-property-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('owner-dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">List Property</div>
                <div style="width: 44px;"></div>
            </div>

            <div class="dashboard-content">
                <div style="text-align: center; margin-bottom: var(--space-lg);">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--accent-blue), #3b82f6); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto var(--space-md); color: white; font-size: 2rem;">
                        <i class="fas fa-home"></i>
                    </div>
                    <h2 style="color: var(--text-primary); margin-bottom: var(--space-xs);">List Your Property</h2>
                    <p style="color: var(--text-secondary);">Reach thousands of trusted tenants</p>
                </div>

                <form id="propertyForm" onsubmit="submitProperty(event)">
                    <div class="form-group">
                        <label class="form-label">Property Type *</label>
                        <select class="form-input" required>
                            <option value="">Select type</option>
                            <option value="bedsitter">Bedsitter</option>
                            <option value="1bedroom">1 Bedroom</option>
                            <option value="2bedroom">2 Bedrooms</option>
                            <option value="shared">Shared Room</option>
                            <option value="studio">Studio Apartment</option>
                            <option value="house">Full House</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location (Area/Compound) *</label>
                        <select class="form-input" required>
                            <option value="">Select area</option>
                            <optgroup label="Lusaka">
                                <option value="woodlands">Woodlands</option>
                                <option value="ridgeway">Ridgeway</option>
                                <option value="northmead">Northmead</option>
                                <option value="kabulonga">Kabulonga</option>
                                <option value="longacres">Longacres</option>
                            </optgroup>
                            <optgroup label="Ndola">
                                <option value="ndola_central">Central</option>
                                <option value="nkwazi">Nkwazi</option>
                                <option value="masala">Masala</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Monthly Rent (ZMW) *</label>
                        <input type="number" class="form-input" placeholder="e.g., 850" min="300" max="10000" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Property Description *</label>
                        <textarea class="form-input" rows="4" placeholder="Describe your property (include amenities, security, etc.)" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Amenities</label>
                        <div class="tag-input" id="amenitiesInput">
                            <!-- Tags will be added here -->
                        </div>
                        <div style="margin-top: var(--space-sm);">
                            <input type="text" id="amenityInput" class="form-input" placeholder="Add amenities (e.g., WiFi, Parking, Security)" style="margin-bottom: var(--space-xs);">
                            <button type="button" onclick="addAmenity()" class="btn-secondary" style="padding: var(--space-sm); font-size: 14px;">
                                <i class="fas fa-plus"></i> Add Amenity
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Add Transport Option</label>
                        <div style="display: flex; gap: var(--space-sm); margin-top: var(--space-xs);">
                            <button type="button" id="transportYes" onclick="toggleTransportOption(true)" class="btn-primary" style="flex: 1; padding: var(--space-sm);">
                                <i class="fas fa-check"></i> Include Transport
                            </button>
                            <button type="button" id="transportNo" onclick="toggleTransportOption(false)" class="btn-secondary" style="flex: 1; padding: var(--space-sm);">
                                No Transport
                            </button>
                        </div>
                        <div id="transportDetails" style="display: none; margin-top: var(--space-md); padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius);">
                            <div class="form-group" style="margin-bottom: var(--space-sm);">
                                <label class="form-label">Transport Routes</label>
                                <select class="form-input">
                                    <option value="">Select route</option>
                                    <option value="unza">Woodlands → UNZA</option>
                                    <option value="cbu">Ridgeway → CBU</option>
                                    <option value="town">Various → Town Area</option>
                                    <option value="custom">Custom Route</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">Monthly Transport Fee (ZMW)</label>
                                <input type="number" class="form-input" placeholder="e.g., 150" min="50" max="500">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Upload Photos (Optional)</label>
                        <div style="border: 2px dashed var(--border-soft); border-radius: var(--radius); padding: var(--space-xl); text-align: center; cursor: pointer; transition: all var(--transition-normal);" 
                             onmouseover="this.style.borderColor='var(--accent-blue)'; this.style.backgroundColor='var(--light-bg)'"
                             onmouseout="this.style.borderColor='var(--border-soft)'; this.style.backgroundColor='transparent'">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--text-tertiary); margin-bottom: var(--space-sm);"></i>
                            <p style="color: var(--text-secondary); margin-bottom: var(--space-sm);">Click to upload property photos</p>
                            <p style="font-size: 12px; color: var(--text-tertiary);">PNG, JPG up to 5MB each</p>
                        </div>
                    </div>
                    
                    <div class="trust-badges" style="margin: var(--space-lg) 0;">
                        <span class="trust-badge">
                            <i class="fas fa-star"></i>
                            Free listing
                        </span>
                        <span class="trust-badge blue">
                            <i class="fas fa-user-check"></i>
                            Verified owners only
                        </span>
                        <span class="trust-badge orange">
                            <i class="fas fa-shield-alt"></i>
                            Secure platform
                        </span>
                    </div>
                    
                    <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md); margin: var(--space-lg) 0;">
                        <label style="display: flex; align-items: flex-start; gap: var(--space-sm); cursor: pointer;">
                            <input type="checkbox" required style="margin-top: 2px; width: 18px; height: 18px; flex-shrink: 0;">
                            <span style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                I confirm this property meets Trustay's standards for safety and cleanliness. 
                                I agree to verification inspection.
                            </span>
                        </label>
                    </div>
                    
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-home"></i> List Property on Trustay
                    </button>
                </form>
            </div>
        </div>

        <!-- Transport Screen -->
        <div class="app-screen" id="transport-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Trustay Transport</div>
                <button class="back-btn" onclick="showTransportBooking()">
                    <i class="fas fa-plus"></i>
                </button>
            </div>

            <div class="dashboard-content">
                <!-- Transport Hero -->
                <div style="background: linear-gradient(135deg, var(--accent-blue), #3b82f6); color: white; border-radius: var(--radius-lg); padding: var(--space-lg); margin-bottom: var(--space-lg); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: -30px; right: -30px; width: 100px; height: 100px; background: rgba(255, 255, 255, 0.1); border-radius: 50%;"></div>
                    <h3 style="margin-bottom: var(--space-sm); display: flex; align-items: center; gap: var(--space-sm); position: relative; z-index: 1;">
                        <i class="fas fa-bus"></i>
                        Safe Monthly Transport
                    </h3>
                    <p style="opacity: 0.9; position: relative; z-index: 1;">Reliable routes to universities, colleges, and workplaces</p>
                </div>

                <!-- Active Transport Subscription -->
                <div style="background: linear-gradient(135deg, var(--trust-green), #34d399); color: white; border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-sm);">
                        <div>
                            <div style="font-weight: 700; font-size: 1.2rem;">Active Subscription</div>
                            <div style="opacity: 0.9; font-size: 14px;">Woodlands → UNZA Route</div>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.2); padding: 6px 12px; border-radius: 20px; font-weight: 700; font-size: 14px;">
                            150 ZMW/month
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 13px; opacity: 0.9;">
                        <div>Renews: 15 Mar 2024</div>
                        <div><a href="#" style="color: white; text-decoration: underline; font-weight: 600;">Manage</a></div>
                    </div>
                </div>

                <!-- Available Routes -->
                <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Available Routes</h3>
                
                <div class="transport-card" onclick="selectTransport('unza', this)">
                    <div class="transport-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="transport-details">
                        <h4>Woodlands → UNZA</h4>
                        <p>Morning & Evening • Verified drivers • Safe vehicles</p>
                        <div class="trust-badges" style="margin-top: var(--space-xs);">
                            <span class="trust-badge" style="font-size: 11px;">
                                <i class="fas fa-clock"></i> 7:00 AM, 5:00 PM
                            </span>
                            <span class="trust-badge blue" style="font-size: 11px;">
                                <i class="fas fa-users"></i> Student route
                            </span>
                        </div>
                        <div class="transport-price">150 ZMW/month</div>
                    </div>
                </div>

                <div class="transport-card" onclick="selectTransport('cbu', this)">
                    <div class="transport-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="transport-details">
                        <h4>Ridgeway → CBU</h4>
                        <p>Direct route • Comfortable seating • Reliable service</p>
                        <div class="trust-badges" style="margin-top: var(--space-xs);">
                            <span class="trust-badge" style="font-size: 11px;">
                                <i class="fas fa-clock"></i> 7:30 AM, 5:30 PM
                            </span>
                            <span class="trust-badge blue" style="font-size: 11px;">
                                <i class="fas fa-shield-alt"></i> Trustay verified
                            </span>
                        </div>
                        <div class="transport-price">200 ZMW/month</div>
                    </div>
                </div>

                <div class="transport-card" onclick="selectTransport('town', this)">
                    <div class="transport-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="transport-details">
                        <h4>Various → Town Area</h4>
                        <p>Multiple pickups • Flexible times • Workspace route</p>
                        <div class="trust-badges" style="margin-top: var(--space-xs);">
                            <span class="trust-badge" style="font-size: 11px;">
                                <i class="fas fa-clock"></i> Flexible times
                            </span>
                            <span class="trust-badge blue" style="font-size: 11px;">
                                <i class="fas fa-briefcase"></i> Worker friendly
                            </span>
                        </div>
                        <div class="transport-price">180 ZMW/month</div>
                    </div>
                </div>

                <!-- How It Works -->
                <div style="margin-top: var(--space-xl); padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary); display: flex; align-items: center; gap: var(--space-sm);">
                        <i class="fas fa-info-circle" style="color: var(--accent-blue);"></i>
                        How Trustay Transport Works
                    </h4>
                    <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm);">
                        <div style="display: flex; gap: var(--space-sm);">
                            <div style="width: 24px; height: 24px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; flex-shrink: 0;">
                                1
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary); font-size: 14px;">Choose Your Route</div>
                                <div style="color: var(--text-secondary); font-size: 13px;">Select from verified monthly routes</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: var(--space-sm);">
                            <div style="width: 24px; height: 24px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; flex-shrink: 0;">
                                2
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary); font-size: 14px;">Subscribe Monthly</div>
                                <div style="color: var(--text-secondary); font-size: 13px;">Pay one month at a time, cancel anytime</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: var(--space-sm);">
                            <div style="width: 24px; height: 24px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 12px; flex-shrink: 0;">
                                3
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary); font-size: 14px;">Safe Daily Commute</div>
                                <div style="color: var(--text-secondary); font-size: 13px;">Verified drivers, reliable service</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Safety Features -->
                <div style="margin-top: var(--space-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Safety Features</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-sm);">
                        <div style="text-align: center; padding: var(--space-md); background: var(--soft-white); border: 1px solid var(--border-soft); border-radius: var(--radius);">
                            <i class="fas fa-user-check" style="color: var(--trust-green); font-size: 1.5rem; margin-bottom: var(--space-xs);"></i>
                            <div style="font-weight: 600; color: var(--text-primary); font-size: 13px;">Verified Drivers</div>
                        </div>
                        <div style="text-align: center; padding: var(--space-md); background: var(--soft-white); border: 1px solid var(--border-soft); border-radius: var(--radius);">
                            <i class="fas fa-shield-alt" style="color: var(--accent-blue); font-size: 1.5rem; margin-bottom: var(--space-xs);"></i>
                            <div style="font-weight: 600; color: var(--text-primary); font-size: 13px;">Vehicle Inspected</div>
                        </div>
                        <div style="text-align: center; padding: var(--space-md); background: var(--soft-white); border: 1px solid var(--border-soft); border-radius: var(--radius);">
                            <i class="fas fa-phone-alt" style="color: var(--warning-orange); font-size: 1.5rem; margin-bottom: var(--space-xs);"></i>
                            <div style="font-weight: 600; color: var(--text-primary); font-size: 13px;">24/7 Support</div>
                        </div>
                        <div style="text-align: center; padding: var(--space-md); background: var(--soft-white); border: 1px solid var(--border-soft); border-radius: var(--radius);">
                            <i class="fas fa-map-marker-alt" style="color: #EF4444; font-size: 1.5rem; margin-bottom: var(--space-xs);"></i>
                            <div style="font-weight: 600; color: var(--text-primary); font-size: 13px;">Live Tracking</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Property Listings Screen -->
        <div class="app-screen" id="listings-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Browse Homes</div>
                <button class="back-btn" onclick="toggleFilters()">
                    <i class="fas fa-filter"></i>
                </button>
            </div>

            <div class="dashboard-content">
                <!-- Filters -->
                <div id="filters-panel" style="background: var(--soft-white); border: 2px solid var(--border-soft); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg); display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
                        <h4 style="color: var(--text-primary); margin: 0;">Filters</h4>
                        <button onclick="clearFilters()" style="background: none; border: none; color: var(--accent-blue); font-weight: 600; cursor: pointer; font-size: 14px;">
                            Clear all
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Property Type</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                            <button class="filter-tag" onclick="toggleFilter('type', 'bedsitter')">Bedsitter</button>
                            <button class="filter-tag" onclick="toggleFilter('type', '1bedroom')">1 Bedroom</button>
                            <button class="filter-tag" onclick="toggleFilter('type', '2bedroom')">2 Bedrooms</button>
                            <button class="filter-tag" onclick="toggleFilter('type', 'shared')">Shared</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Max Price (ZMW/month)</label>
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <input type="range" min="500" max="3000" step="100" value="2000" class="form-input" style="padding: 0; flex: 1;" oninput="updatePriceFilter(this.value)">
                            <div style="font-weight: 700; color: var(--text-primary); min-width: 80px; text-align: right;">
                                <span id="priceFilterValue">2000</span> ZMW
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <select class="form-input" onchange="filterByLocation(this.value)">
                            <option value="">All Areas</option>
                            <option value="woodlands">Woodlands</option>
                            <option value="ridgeway">Ridgeway</option>
                            <option value="northmead">Northmead</option>
                            <option value="kabulonga">Kabulonga</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" onchange="toggleVerifiedOnly(this.checked)" style="width: 18px; height: 18px;">
                            <span style="color: var(--text-primary); font-weight: 600; font-size: 14px;">Verified Properties Only</span>
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" onchange="toggleTransportFilter(this.checked)" style="width: 18px; height: 18px;">
                            <span style="color: var(--text-primary); font-weight: 600; font-size: 14px;">With Transport Option</span>
                        </label>
                    </div>
                    
                    <button class="btn-primary" onclick="applyFilters()">
                        <i class="fas fa-check"></i> Apply Filters
                    </button>
                </div>

                <!-- Search Results -->
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
                    <h3 style="color: var(--text-primary); margin: 0;">
                        <span id="resultsCount">142</span> Homes Available
                    </h3>
                    <div style="display: flex; gap: 8px;">
                        <button class="back-btn" style="width: 36px; height: 36px;" onclick="changeSort('price')">
                            <i class="fas fa-sort-amount-down"></i>
                        </button>
                        <button class="back-btn" style="width: 36px; height: 36px;" onclick="changeView()">
                            <i class="fas fa-th"></i>
                        </button>
                    </div>
                </div>

                <div class="properties-grid" id="all-properties">
                    <!-- All properties loaded via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Property Detail Screen -->
        <div class="app-screen" id="property-screen">
            <div class="app-header">
                <button class="back-btn" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Property Details</div>
                <button class="back-btn" onclick="toggleSaveProperty()">
                    <i class="far fa-heart" id="save-icon"></i>
                </button>
            </div>

            <!-- Property Image Gallery -->
            <div id="property-gallery" style="height: 300px; position: relative;">
                <div id="property-main-image" style="width: 100%; height: 100%; background-size: cover; background-position: center;"></div>
                <div style="position: absolute; bottom: var(--space-md); left: var(--space-md); right: var(--space-md); display: flex; justify-content: space-between; align-items: flex-end;">
                    <div id="property-transport-tag" class="transport-tag" style="display: none;">
                        <i class="fas fa-bus"></i> Transport Available
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="save-button" id="property-save-button" onclick="toggleSaveProperty()">
                            <i class="far fa-heart"></i>
                        </button>
                        <button class="save-button" onclick="shareProperty()">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                </div>
                <div style="position: absolute; top: var(--space-md); right: var(--space-md); background: rgba(16, 185, 129, 0.95); color: white; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 700;">
                    <i class="fas fa-shield-check"></i> Trustay Verified
                </div>
            </div>

            <!-- Property Info -->
            <div style="padding: var(--space-md);">
                <h1 id="property-title" style="margin-bottom: var(--space-xs); color: var(--text-primary); font-size: 1.5rem;">Modern Bedsitter near UNZA</h1>
                
                <div class="property-meta">
                    <span><i class="fas fa-map-marker-alt"></i> <span id="property-location">Woodlands, Lusaka</span></span>
                    <span><i class="fas fa-bed"></i> Bedsitter</span>
                    <span><i class="fas fa-ruler-combined"></i> 35m²</span>
                </div>
                
                <!-- Trust Badges -->
                <div class="trust-badges" id="property-badges" style="margin: var(--space-md) 0;">
                    <!-- Trust badges loaded via JavaScript -->
                </div>
                
                <!-- Price -->
                <div style="margin: var(--space-lg) 0;">
                    <div class="property-price" id="property-price">850 ZMW/month</div>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-top: 4px;">
                        <i class="fas fa-check-circle" style="color: var(--trust-green);"></i> No agent fees • Monthly contract available
                    </p>
                </div>
                
                <!-- Owner Info -->
                <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg);">
                    <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-sm);">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--accent-blue), #3b82f6); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                            MB
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; color: var(--text-primary);">Mr. Banda</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">Trustay Verified Owner</div>
                        </div>
                        <div class="rating">
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star rating-star"></i>
                            <i class="fas fa-star-half-alt rating-star"></i>
                            <span class="rating-score">4.5</span>
                            <span class="rating-count">(24 reviews)</span>
                        </div>
                    </div>
                    <div style="display: flex; gap: var(--space-sm);">
                        <button class="btn-secondary" style="flex: 1; padding: var(--space-sm);" onclick="contactOwner()">
                            <i class="fas fa-phone"></i> Call
                        </button>
                        <button class="btn-secondary" style="flex: 1; padding: var(--space-sm);" onclick="messageOwner()">
                            <i class="fas fa-comment"></i> Message
                        </button>
                    </div>
                </div>
                
                <!-- Description -->
                <div style="margin-bottom: var(--space-lg);">
                    <h3 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Description</h3>
                    <p id="property-description" style="color: var(--text-primary); line-height: 1.6;">
                        Spacious bedsitter perfect for students, with kitchen area, private bathroom, and secure premises. Close to UNZA campus.
                    </p>
                </div>
                
                <!-- Amenities -->
                <div style="margin-bottom: var(--space-lg);">
                    <h3 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Amenities</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-sm);">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-size: 14px;">Private Bathroom</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-size: 14px;">Kitchen Area</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-size: 14px;">Security Guard</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-size: 14px;">Water Available</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-size: 14px;">Electricity</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-check-circle" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-size: 14px;">Clean Compound</span>
                        </div>
                    </div>
                </div>
                
                <!-- Transport Option -->
                <div id="transport-option" style="display: none; background: rgba(37, 99, 235, 0.05); border: 2px solid rgba(37, 99, 235, 0.2); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary); display: flex; align-items: center; gap: var(--space-sm);">
                        <i class="fas fa-bus" style="color: var(--accent-blue);"></i>
                        Available Transport
                    </h4>
                    <p style="color: var(--text-primary); margin-bottom: var(--space-sm); font-weight: 600;">
                        UNZA Route: 150 ZMW/month
                    </p>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: var(--space-md);">
                        Morning pickups at 7:00 AM, evening return at 5:00 PM. Verified drivers, safe vehicles.
                    </p>
                    <label style="display: flex; align-items: center; gap: var(--space-sm); cursor: pointer;">
                        <input type="checkbox" id="include-transport" style="width: 20px; height: 20px;">
                        <div>
                            <div style="font-weight: 700; color: var(--text-primary);">Include monthly transport</div>
                            <div style="color: var(--text-secondary); font-size: 13px;">Add 150 ZMW/month to your booking</div>
                        </div>
                    </label>
                </div>
                
                <!-- Reviews -->
                <div style="margin-bottom: var(--space-lg);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-sm);">
                        <h3 style="color: var(--text-primary); margin: 0;">Reviews</h3>
                        <a href="#" style="color: var(--accent-blue); font-weight: 600; font-size: 14px;">See all 24</a>
                    </div>
                    <div class="review-card">
                        <div class="review-header">
                            <div class="reviewer">
                                <div class="reviewer-avatar">CK</div>
                                <div class="reviewer-info">
                                    <h4>Chanda K.</h4>
                                    <p>UNZA Student</p>
                                </div>
                            </div>
                            <div class="rating">
                                <i class="fas fa-star rating-star"></i>
                                <i class="fas fa-star rating-star"></i>
                                <i class="fas fa-star rating-star"></i>
                                <i class="fas fa-star rating-star"></i>
                                <i class="fas fa-star rating-star"></i>
                            </div>
                        </div>
                        <div class="review-content">
                            "Great place for students! The owner is very helpful and the transport option makes getting to UNZA easy. Highly recommend!"
                        </div>
                        <div class="review-date">2 months ago</div>
                    </div>
                </div>
                
                <!-- Map (Placeholder) -->
                <div style="margin-bottom: var(--space-xl);">
                    <h3 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Location</h3>
                    <div style="height: 200px; background: var(--light-bg); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--text-secondary);">
                        <div style="text-align: center;">
                            <i class="fas fa-map-marker-alt" style="font-size: 2rem; margin-bottom: var(--space-sm); color: var(--accent-blue);"></i>
                            <p>Woodlands, Lusaka</p>
                            <p style="font-size: 14px;">Near UNZA, shops, and transport</p>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div style="position: sticky; bottom: 0; background: var(--soft-white); padding: var(--space-md) 0; border-top: 1px solid var(--border-soft); margin-top: var(--space-xl);">
                    <div style="display: flex; gap: var(--space-sm);">
                        <button class="btn-secondary" onclick="savePropertyForLater()" style="flex: 1;">
                            <i class="far fa-heart"></i> Save
                        </button>
                        <button class="btn-primary" onclick="startBooking()" style="flex: 2;">
                            <i class="fas fa-calendar-check"></i> Book Viewing
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Booking Screen -->
        <div class="app-screen" id="booking-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('property')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Book Home</div>
                <div style="width: 44px;"></div>
            </div>

            <div style="padding: var(--space-md);">
                <div class="booking-header">
                    <h2>Complete Your Booking</h2>
                    <p>Secure your new home in 3 easy steps</p>
                </div>

                <!-- Step Indicator -->
                <div class="step-indicator">
                    <div class="step active" id="step1-indicator">
                        <div class="step-circle">1</div>
                        <div class="step-label">Dates</div>
                    </div>
                    <div class="step" id="step2-indicator">
                        <div class="step-circle">2</div>
                        <div class="step-label">Transport</div>
                    </div>
                    <div class="step" id="step3-indicator">
                        <div class="step-circle">3</div>
                        <div class="step-label">Payment</div>
                    </div>
                </div>

                <!-- Step 1: Dates -->
                <div class="booking-step active" id="step1">
                    <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Select Move-in Date</h3>
                    
                    <div class="form-group">
                        <label class="form-label">When would you like to move in?</label>
                        <input type="date" class="form-input" id="move-in-date" required min="2024-03-01">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Duration (Months)</label>
                        <select class="form-input" id="duration" onchange="updateBookingSummary()">
                            <option value="1">1 month</option>
                            <option value="3" selected>3 months</option>
                            <option value="6">6 months</option>
                            <option value="12">12 months</option>
                        </select>
                    </div>
                    
                    <div class="booking-summary">
                        <div class="summary-item">
                            <span>Monthly Rent:</span>
                            <span id="summary-rent">850 ZMW</span>
                        </div>
                        <div class="summary-item">
                            <span>Duration:</span>
                            <span id="summary-duration-display">3 months</span>
                        </div>
                        <div class="summary-item">
                            <span>Subtotal:</span>
                            <span id="summary-subtotal">2,550 ZMW</span>
                        </div>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="btn-primary" onclick="nextStep(2)">
                            Continue to Transport <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Transport -->
                <div class="booking-step" id="step2">
                    <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Transport Options</h3>
                    
                    <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg);">
                        <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Trustay Transport Service</h4>
                        <p style="color: var(--text-secondary); margin-bottom: var(--space-md); font-size: 14px;">
                            Safe, reliable monthly transport with verified drivers. Cancel anytime.
                        </p>
                        
                        <label style="display: flex; align-items: flex-start; gap: var(--space-sm); margin-bottom: var(--space-md); cursor: pointer; padding: var(--space-sm); border-radius: var(--radius-sm); transition: all var(--transition-fast);" 
                               id="transport-yes-label"
                               onmouseover="this.style.backgroundColor='rgba(37, 99, 235, 0.05)'"
                               onmouseout="this.style.backgroundColor='transparent'">
                            <input type="radio" name="transport" value="yes" style="margin-top: 2px; width: 18px; height: 18px;" onchange="updateTransportSelection(true)">
                            <div style="flex: 1;">
                                <div style="font-weight: 700; color: var(--text-primary);">Include Trustay Transport</div>
                                <div style="color: var(--text-secondary); font-size: 14px; margin-top: 4px;">
                                    Woodlands → UNZA Route • 150 ZMW/month
                                </div>
                                <div style="margin-top: var(--space-sm);">
                                    <div class="trust-badges">
                                        <span class="trust-badge" style="font-size: 11px;">
                                            <i class="fas fa-clock"></i> 7:00 AM, 5:00 PM
                                        </span>
                                        <span class="trust-badge blue" style="font-size: 11px;">
                                            <i class="fas fa-shield-alt"></i> Verified drivers
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </label>
                        
                        <label style="display: flex; align-items: flex-start; gap: var(--space-sm); cursor: pointer; padding: var(--space-sm); border-radius: var(--radius-sm); transition: all var(--transition-fast);"
                               id="transport-no-label"
                               onmouseover="this.style.backgroundColor='rgba(11, 31, 59, 0.05)'"
                               onmouseout="this.style.backgroundColor='transparent'">
                            <input type="radio" name="transport" value="no" checked style="margin-top: 2px; width: 18px; height: 18px;" onchange="updateTransportSelection(false)">
                            <div>
                                <div style="font-weight: 700; color: var(--text-primary);">No transport needed</div>
                                <div style="color: var(--text-secondary); font-size: 14px; margin-top: 4px;">
                                    I'll arrange my own transport
                                </div>
                            </div>
                        </label>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="btn-secondary" onclick="prevStep(1)">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn-primary" onclick="nextStep(3)">
                            Continue <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 3: Payment -->
                <div class="booking-step" id="step3">
                    <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Payment Method</h3>
                    
                    <div style="margin-bottom: var(--space-lg);">
                        <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Choose Payment Method</h4>
                        <div class="payment-methods">
                            <div class="payment-method" onclick="selectPaymentMethod('mobile_money', this)">
                                <i class="fas fa-mobile-alt"></i>
                                <h4>Mobile Money</h4>
                                <p>Zambia-wide</p>
                            </div>
                            <div class="payment-method selected" onclick="selectPaymentMethod('bank_transfer', this)">
                                <i class="fas fa-university"></i>
                                <h4>Bank Transfer</h4>
                                <p>All banks</p>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('cash', this)">
                                <i class="fas fa-money-bill-wave"></i>
                                <h4>Cash</h4>
                                <p>In-person</p>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('card', this)">
                                <i class="fas fa-credit-card"></i>
                                <h4>Card</h4>
                                <p>Visa/Mastercard</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="booking-summary">
                        <h4 style="margin-bottom: var(--space-md); color: var(--text-primary);">Booking Summary</h4>
                        <div class="summary-item">
                            <span>Property:</span>
                            <span>Modern Bedsitter</span>
                        </div>
                        <div class="summary-item">
                            <span>Duration:</span>
                            <span id="summary-duration-final">3 months</span>
                        </div>
                        <div class="summary-item">
                            <span>Monthly Rent:</span>
                            <span>850 ZMW</span>
                        </div>
                        <div class="summary-item">
                            <span>Monthly Transport:</span>
                            <span id="summary-transport-final">150 ZMW</span>
                        </div>
                        <div class="summary-item">
                            <span>Trustay Fee:</span>
                            <span>0 ZMW</span>
                        </div>
                        <div class="summary-item total">
                            <span>Total First Payment:</span>
                            <span id="summary-total-final">3,000 ZMW</span>
                        </div>
                    </div>
                    
                    <p style="color: var(--text-secondary); font-size: 14px; margin: var(--space-lg) 0; text-align: center; line-height: 1.6;">
                        <i class="fas fa-info-circle"></i> You'll pay the first month's rent + transport (if selected). 
                        Subsequent months are paid monthly.
                    </p>
                    
                    <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg);">
                        <label style="display: flex; align-items: flex-start; gap: var(--space-sm); cursor: pointer;">
                            <input type="checkbox" required style="margin-top: 2px; width: 18px; height: 18px; flex-shrink: 0;">
                            <span style="color: var(--text-secondary); font-size: 14px; line-height: 1.5;">
                                I agree to Trustay's 
                                <a href="#" style="color: var(--accent-blue); font-weight: 600;">Booking Terms</a>. 
                                I understand this is a booking request and the owner will contact me to confirm.
                            </span>
                        </label>
                    </div>
                    
                    <div class="booking-actions">
                        <button class="btn-secondary" onclick="prevStep(2)">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn-primary" onclick="confirmBooking()">
                            <i class="fas fa-check"></i> Confirm Booking
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Booking Confirmation Screen -->
        <div class="app-screen" id="confirmation-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Booking Confirmed</div>
                <div style="width: 44px;"></div>
            </div>

            <div style="text-align: center; padding: var(--space-xl) var(--space-md);">
                <div style="width: 100px; height: 100px; background: linear-gradient(135deg, var(--trust-green), #34d399); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; margin: 0 auto var(--space-lg);">
                    <i class="fas fa-check"></i>
                </div>
                <h2 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Booking Request Sent!</h2>
                <p style="color: var(--text-secondary); margin-bottom: var(--space-lg); line-height: 1.6; font-size: 16px;">
                    Your request for <span id="confirmed-property" style="font-weight: 700; color: var(--text-primary);">Modern Bedsitter</span> has been sent to the owner.
                </p>
                
                <div style="background: var(--light-bg); border-radius: var(--radius-lg); padding: var(--space-lg); margin: var(--space-xl) 0; text-align: left;">
                    <h4 style="margin-bottom: var(--space-md); color: var(--text-primary);">What Happens Next?</h4>
                    <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-md);">
                        <div style="display: flex; gap: var(--space-md);">
                            <div style="width: 32px; height: 32px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; flex-shrink: 0;">
                                1
                            </div>
                            <div>
                                <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Owner Contact</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">The owner will contact you within 24 hours</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: var(--space-md);">
                            <div style="width: 32px; height: 32px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; flex-shrink: 0;">
                                2
                            </div>
                            <div>
                                <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Property Viewing</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">Schedule a free viewing at your convenience</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: var(--space-md);">
                            <div style="width: 32px; height: 32px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; flex-shrink: 0;">
                                3
                            </div>
                            <div>
                                <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Finalize Agreement</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">Sign digital contract if you're satisfied</div>
                            </div>
                        </div>
                        <div style="display: flex; gap: var(--space-md);">
                            <div style="width: 32px; height: 32px; background: var(--accent-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; flex-shrink: 0;">
                                4
                            </div>
                            <div>
                                <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Move In</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">Move in on your selected date with transport ready</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: var(--space-sm);">
                    <button class="btn-secondary" onclick="showScreen('listings')" style="flex: 1;">
                        Browse More Homes
                    </button>
                    <button class="btn-primary" onclick="showScreen('dashboard')" style="flex: 1;">
                        Back to Home
                    </button>
                </div>
            </div>
        </div>

        <!-- Saved Properties Screen -->
        <div class="app-screen" id="saved-screen">
            <div class="app-header">
                <button class="back-btn" onclick="showScreen('dashboard')">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="logo-small">Saved Homes</div>
                <button class="back-btn" onclick="clearSaved()">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>

            <div class="dashboard-content">
                <!-- Saved Properties List -->
                <div id="saved-properties">
                    <!-- Saved properties loaded via JavaScript -->
                </div>
                
                <!-- Empty State -->
                <div id="saved-empty" class="empty-state">
                    <i class="far fa-heart"></i>
                    <h3>No saved homes yet</h3>
                    <p>When you find homes you like, tap the heart icon to save them here for later.</p>
                    <button class="btn-primary" onclick="showScreen('listings')" style="margin-top: var(--space-lg);">
                        <i class="fas fa-search"></i> Browse Homes
                    </button>
                </div>
            </div>
        </div>

        <!-- Profile Screen -->
        <div class="app-screen" id="profile-screen">
            <div style="background: linear-gradient(135deg, var(--deep-blue) 0%, var(--accent-blue) 100%); padding: var(--space-xl) var(--space-md) var(--space-lg); color: white;">
                <div style="display: flex; align-items: center; gap: var(--space-md);">
                    <div style="width: 80px; height: 80px; border-radius: 50%; background: rgba(255, 255, 255, 0.2); display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 700;">
                        JB
                    </div>
                    <div style="flex: 1;">
                        <h2 id="profile-name" style="font-size: 1.5rem; margin-bottom: 4px;">John Banda</h2>
                        <div id="profile-role" style="background: rgba(255, 255, 255, 0.2); padding: 6px 12px; border-radius: 20px; font-size: 14px; display: inline-block;">
                            <i class="fas fa-user-check"></i> Trustay Verified
                        </div>
                    </div>
                </div>
            </div>

            <div style="padding: var(--space-md);">
                <!-- Account Info -->
                <div style="background: var(--soft-white); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg); border: 1px solid var(--border-soft);">
                    <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">My Account</h3>
                    <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm);">
                        <div style="display: flex; justify-content: space-between; padding: var(--space-sm) 0; border-bottom: 1px solid var(--border-soft);">
                            <div style="color: var(--text-secondary);">Phone</div>
                            <div style="font-weight: 700; color: var(--text-primary);">+260 97 123 4567</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: var(--space-sm) 0; border-bottom: 1px solid var(--border-soft);">
                            <div style="color: var(--text-secondary);">Email</div>
                            <div style="font-weight: 700; color: var(--text-primary);">john.banda@example.com</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: var(--space-sm) 0; border-bottom: 1px solid var(--border-soft);">
                            <div style="color: var(--text-secondary);">Member Since</div>
                            <div style="font-weight: 700; color: var(--text-primary);">Jan 2024</div>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: var(--space-sm) 0;">
                            <div style="color: var(--text-secondary);">Status</div>
                            <div style="font-weight: 700; color: var(--trust-green); display: flex; align-items: center; gap: 6px;">
                                <i class="fas fa-shield-check"></i>
                                Verified
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Links -->
                <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">My Trustay</h3>
                <div style="background: var(--soft-white); border-radius: var(--radius); margin-bottom: var(--space-lg); border: 1px solid var(--border-soft); overflow: hidden;">
                    <a href="#" onclick="showScreen('saved')" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); border-bottom: 1px solid var(--border-soft); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(239, 68, 68, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: #EF4444;">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">Saved Homes</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">5 properties saved</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                    <a href="#" onclick="showScreen('transport')" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); border-bottom: 1px solid var(--border-soft); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(37, 99, 235, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--accent-blue);">
                                <i class="fas fa-bus"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">My Transport</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">Active subscription</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                    <a href="#" onclick="showBookings()" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); border-bottom: 1px solid var(--border-soft); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(16, 185, 129, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--trust-green);">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">My Bookings</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">3 active bookings</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                    <a href="#" onclick="showPaymentMethods()" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(245, 158, 11, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--warning-orange);">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">Payment Methods</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">Manage payments</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                </div>

                <!-- Support -->
                <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Support</h3>
                <div style="background: var(--soft-white); border-radius: var(--radius); margin-bottom: var(--space-lg); border: 1px solid var(--border-soft); overflow: hidden;">
                    <a href="#" onclick="showHelp()" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); border-bottom: 1px solid var(--border-soft); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(139, 92, 246, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: #8B5CF6;">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">Help Center</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">FAQs & guides</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                    <a href="#" onclick="showSupport()" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); border-bottom: 1px solid var(--border-soft); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(59, 130, 246, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: #3B82F6;">
                                <i class="fas fa-headset"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">Contact Support</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">24/7 assistance</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                    <a href="#" onclick="showSafety()" style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-md); text-decoration: none; color: var(--text-primary); transition: all var(--transition-fast);"
                       onmouseover="this.style.backgroundColor='var(--light-bg)'"
                       onmouseout="this.style.backgroundColor='transparent'">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="width: 40px; height: 40px; background: rgba(16, 185, 129, 0.1); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--trust-green);">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div>
                                <div style="font-weight: 700;">Safety Center</div>
                                <div style="color: var(--text-secondary); font-size: 14px;">Trust & safety guidelines</div>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-tertiary);"></i>
                    </a>
                </div>

                <!-- About Trustay -->
                <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">About Trustay</h4>
                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6; margin-bottom: var(--space-sm);">
                        Trustay is Zambia's trusted platform for monthly living. We verify every home and owner, 
                        provide safe transport options, and ensure no hidden fees. Zambian-owned and operated.
                    </p>
                    <div style="display: flex; gap: var(--space-sm); flex-wrap: wrap;">
                        <span class="trust-badge" style="font-size: 11px;">
                            <i class="fas fa-home"></i> Since 2023
                        </span>
                        <span class="trust-badge blue" style="font-size: 11px;">
                            <i class="fas fa-users"></i> 10,000+ users
                        </span>
                        <span class="trust-badge orange" style="font-size: 11px;">
                            <i class="fas fa-star"></i> 4.8 rating
                        </span>
                    </div>
                </div>

                <!-- Logout -->
                <button class="btn-secondary" onclick="logout()" style="width: 100%; padding: var(--space-md); background: rgba(239, 68, 68, 0.1); color: #EF4444; border-color: rgba(239, 68, 68, 0.3);">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Overlay -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalContent">
            <!-- Modal content will be loaded here -->
        </div>
    </div>

    <script>
        // ===== TRUSTAY APP - COMPLETE IMPLEMENTATION =====
        
        // ===== APP STATE MANAGEMENT =====
        let currentUser = null;
        let currentRole = 'tenant';
        let savedProperties = JSON.parse(localStorage.getItem('trustay_saved')) || ['prop1', 'prop2'];
        let bookings = JSON.parse(localStorage.getItem('trustay_bookings')) || [];
        let properties = [
            {
                id: 'prop1',
                title: 'Modern Bedsitter near UNZA',
                location: 'Woodlands, Lusaka',
                price: 850,
                image: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                description: 'Spacious bedsitter perfect for students with kitchen area, private bathroom, and secure premises. Close to UNZA campus.',
                verified: true,
                transport: true,
                type: 'bedsitter',
                area: 'woodlands',
                badges: ['Verified Owner', 'Inspected Feb 2024', 'UNZA Route', '24/7 Security'],
                amenities: ['Private Bathroom', 'Kitchen Area', 'Security Guard', 'Water Available', 'Electricity', 'Clean Compound'],
                size: '35m²',
                rating: 4.5,
                reviews: 24,
                owner: {
                    name: 'Mr. Banda',
                    verified: true,
                    rating: 4.5
                }
            },
            {
                id: 'prop2',
                title: 'Cozy 1-Bedroom in Ridgeway',
                location: 'Ridgeway, Lusaka',
                price: 1200,
                image: 'https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                description: 'Fully furnished apartment with balcony, secure parking, and 24/7 security. Perfect for young professionals.',
                verified: true,
                transport: true,
                type: '1bedroom',
                area: 'ridgeway',
                badges: ['Verified Owner', 'Fully Furnished', 'CBU Route', 'Secure Parking'],
                amenities: ['Fully Furnished', 'Balcony', 'Secure Parking', '24/7 Security', 'WiFi Available', 'Water & Electricity'],
                size: '45m²',
                rating: 4.7,
                reviews: 18,
                owner: {
                    name: 'Mrs. Mwila',
                    verified: true,
                    rating: 4.8
                }
            },
            {
                id: 'prop3',
                title: 'Affordable Room in Northmead',
                location: 'Northmead, Lusaka',
                price: 650,
                image: 'https://images.unsplash.com/photo-1512918728675-ed5a9ecdebfd?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                description: 'Clean room in shared house with friendly tenants. Includes utilities and WiFi.',
                verified: false,
                transport: false,
                type: 'shared',
                area: 'northmead',
                badges: ['New Listing', 'Utilities Included', 'Shared House'],
                amenities: ['Shared Bathroom', 'Shared Kitchen', 'WiFi Included', 'Utilities Included', 'Friendly Tenants'],
                size: '20m²',
                rating: 4.2,
                reviews: 8,
                owner: {
                    name: 'Mr. Phiri',
                    verified: false,
                    rating: 4.0
                }
            },
            {
                id: 'prop4',
                title: 'Luxury Studio in Kabulonga',
                location: 'Kabulonga, Lusaka',
                price: 1800,
                image: 'https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                description: 'Modern studio apartment with premium finishes, gym access, and swimming pool.',
                verified: true,
                transport: true,
                type: 'studio',
                area: 'kabulonga',
                badges: ['Luxury', 'Gym Access', 'Swimming Pool', '24/7 Security'],
                amenities: ['Premium Finishes', 'Gym Access', 'Swimming Pool', 'Secure Parking', 'Concierge', 'WiFi'],
                size: '50m²',
                rating: 4.9,
                reviews: 32,
                owner: {
                    name: 'Estate Managers Ltd',
                    verified: true,
                    rating: 4.9
                }
            }
        ];

        let transportRoutes = [
            {
                id: 'unza',
                name: 'Woodlands → UNZA',
                price: 150,
                description: 'Morning & Evening • Verified drivers • Safe vehicles',
                times: ['7:00 AM', '5:00 PM'],
                features: ['Student route', 'Verified drivers', 'Reliable service']
            },
            {
                id: 'cbu',
                name: 'Ridgeway → CBU',
                price: 200,
                description: 'Direct route • Comfortable seating • Reliable service',
                times: ['7:30 AM', '5:30 PM'],
                features: ['Student route', 'Trustay verified', 'Comfortable']
            },
            {
                id: 'town',
                name: 'Various → Town Area',
                price: 180,
                description: 'Multiple pickups • Flexible times • Workspace route',
                times: ['Flexible times'],
                features: ['Worker friendly', 'Flexible schedule', 'Multiple stops']
            }
        ];

        let currentBooking = {
            property: null,
            moveInDate: null,
            duration: 3,
            includeTransport: false,
            transportRoute: null,
            paymentMethod: 'bank_transfer'
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            // After brand intro, show hero screen
            setTimeout(() => {
                document.getElementById('screen-hero').classList.add('active');
            }, 3000);

            // Get Started button
            document.getElementById('get-started-btn').addEventListener('click', function() {
                showScreen('register');
            });

            // Check for saved user session
            const savedUser = localStorage.getItem('trustay_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                currentRole = currentUser.role || 'tenant';
                showScreen('dashboard');
                document.getElementById('app').classList.add('active');
                document.getElementById('screen-hero').classList.remove('active');
                updateGreeting();
                loadProperties();
                updateStats();
            }

            // Load initial data
            loadProperties();
            updateStats();
            
            // Set up event listeners
            setupEventListeners();
            
            // Update greeting based on time
            updateGreeting();
            
            // Set min date for booking to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const minDate = tomorrow.toISOString().split('T')[0];
            document.getElementById('move-in-date').min = minDate;
            document.getElementById('move-in-date').value = minDate;
        });

        // ===== SETUP EVENT LISTENERS =====
        function setupEventListeners() {
            // Budget slider
            const budgetSlider = document.querySelector('input[type="range"]');
            if (budgetSlider) {
                budgetSlider.addEventListener('input', function() {
                    document.getElementById('budgetValue').textContent = this.value;
                });
            }

            // Institution select
            const institutionSelect = document.getElementById('institutionSelect');
            if (institutionSelect) {
                institutionSelect.addEventListener('change', function() {
                    const otherInput = document.getElementById('otherInstitution');
                    otherInput.style.display = this.value === 'other' ? 'block' : 'none';
                });
            }

            // Search input
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', debounce(filterProperties, 300));
            }

            // Price filter
            const priceFilter = document.querySelector('input[type="range"]');
            if (priceFilter && priceFilter.id !== 'budgetValue') {
                priceFilter.addEventListener('input', function() {
                    document.getElementById('priceFilterValue').textContent = this.value;
                });
            }

            // Booking form inputs
            const durationSelect = document.getElementById('duration');
            if (durationSelect) {
                durationSelect.addEventListener('change', updateBookingSummary);
            }

            const transportYes = document.getElementById('transport-yes-label');
            const transportNo = document.getElementById('transport-no-label');
            if (transportYes && transportNo) {
                transportYes.addEventListener('click', function() {
                    updateTransportSelection(true);
                });
                transportNo.addEventListener('click', function() {
                    updateTransportSelection(false);
                });
            }
        }

        // ===== SCREEN MANAGEMENT =====
        function showScreen(screenId) {
            // Hide hero screen when entering app
            if (screenId !== 'hero') {
                document.getElementById('screen-hero').classList.remove('active');
                document.getElementById('app').classList.add('active');
            }

            // Show bottom nav only if logged in
            const bottomNav = document.getElementById('bottomNav');
            if (currentUser && screenId !== 'login' && screenId !== 'register' && screenId !== 'hero') {
                bottomNav.classList.add('active');
            } else {
                bottomNav.classList.remove('active');
            }

            // Hide all app screens
            document.querySelectorAll('.app-screen').forEach(screen => {
                screen.classList.remove('active');
            });

            // Show target screen
            const targetScreen = document.getElementById(screenId + '-screen');
            if (targetScreen) {
                targetScreen.classList.add('active');
            }

            // Update nav
            updateNav(screenId);
            
            // Special screen handling
            switch(screenId) {
                case 'dashboard':
                    if (currentRole === 'owner') {
                        showScreen('owner-dashboard');
                    } else {
                        loadFeaturedProperties();
                        updateGreeting();
                    }
                    break;
                case 'saved':
                    loadSavedProperties();
                    break;
                case 'listings':
                    loadAllProperties();
                    break;
                case 'transport':
                    loadTransportRoutes();
                    break;
                case 'owner-dashboard':
                    loadOwnerDashboard();
                    break;
            }
        }

        function updateNav(screenId) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeNav = document.querySelector(`.nav-item[onclick*="${screenId}"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }
        }

        function goBack() {
            const currentScreen = document.querySelector('.app-screen.active');
            if (!currentScreen) return;
            
            const screenId = currentScreen.id.replace('-screen', '');
            
            switch(screenId) {
                case 'property':
                    showScreen('listings');
                    break;
                case 'booking':
                    showScreen('property');
                    break;
                case 'confirmation':
                    showScreen('dashboard');
                    break;
                case 'owner-add-property':
                    showScreen('owner-dashboard');
                    break;
                default:
                    showScreen('dashboard');
            }
        }

        // ===== AUTH FUNCTIONS =====
        function login(event) {
            if (event) event.preventDefault();
            
            const phone = document.querySelector('#login-screen input[type="tel"]').value;
            const password = document.querySelector('#login-screen input[type="password"]').value;
            
            // Demo validation
            if (phone === '971234567' && password === 'demo123') {
                currentUser = {
                    name: 'John Banda',
                    phone: phone,
                    email: 'john.banda@example.com',
                    role: 'tenant',
                    institution: 'UNZA',
                    verified: true,
                    joined: 'Jan 2024'
                };

                localStorage.setItem('trustay_user', JSON.stringify(currentUser));
                showToast('Welcome back to Trustay!', 'success');
                showScreen('dashboard');
                updateGreeting();
                loadProperties();
                updateStats();
            } else {
                showToast('Invalid phone or password. Try demo: 971234567 / demo123', 'error');
            }
        }

        function register(event) {
            if (event) event.preventDefault();
            
            const name = document.querySelector('#register-screen input[type="text"]').value || 'John Banda';
            const phone = document.querySelector('#register-screen input[type="tel"]').value || '971234567';
            
            currentUser = {
                name: name,
                phone: phone,
                email: document.querySelector('#register-screen input[type="email"]').value || 'john@example.com',
                role: currentRole,
                institution: document.getElementById('institutionSelect').value === 'other' 
                    ? document.querySelector('#otherInstitution input').value 
                    : document.getElementById('institutionSelect').value,
                budget: document.getElementById('budgetValue').textContent,
                verified: true,
                joined: new Date().toLocaleDateString('en-US', { month: 'short', year: 'numeric' })
            };

            localStorage.setItem('trustay_user', JSON.stringify(currentUser));
            
            showToast('Account created successfully! Welcome to Trustay.', 'success');
            
            if (currentRole === 'owner') {
                showScreen('owner-dashboard');
            } else {
                showScreen('dashboard');
            }
            
            updateGreeting();
        }

        function selectRole(role, element) {
            currentRole = role;
            
            // Update UI
            document.querySelectorAll('.owner-action-card').forEach(card => {
                card.style.borderColor = 'var(--border-soft)';
                card.style.background = 'var(--soft-white)';
                card.style.color = 'var(--text-primary)';
                card.querySelector('h4').style.color = 'var(--text-primary)';
            });
            
            if (element) {
                element.style.borderColor = 'var(--accent-blue)';
                element.style.background = 'rgba(37, 99, 235, 0.1)';
                element.style.color = 'var(--accent-blue)';
                element.querySelector('h4').style.color = 'var(--accent-blue)';
            }
        }

        function nextRegisterStep(step) {
            // Hide all steps
            document.querySelectorAll('#registerForm .booking-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Update step indicator
            document.querySelectorAll('#register-screen .step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                }
            });
            
            // Show current step
            document.getElementById('registerStep' + step).classList.add('active');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('trustay_user');
            showToast('Logged out successfully', 'success');
            showScreen('hero');
            document.getElementById('app').classList.remove('active');
            document.getElementById('screen-hero').classList.add('active');
        }

        // ===== PROPERTY FUNCTIONS =====
        function loadProperties() {
            loadFeaturedProperties();
            loadAllProperties();
            updateStats();
        }

        function loadFeaturedProperties() {
            const container = document.getElementById('featured-properties');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Get verified properties only for featured
            const featured = properties.filter(p => p.verified).slice(0, 3);
            
            if (featured.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-home"></i>
                        <h3>No Featured Homes</h3>
                        <p>Check back soon for new verified properties</p>
                    </div>
                `;
                return;
            }
            
            featured.forEach(property => {
                container.innerHTML += createPropertyCard(property);
            });
        }

        function loadAllProperties() {
            const container = document.getElementById('all-properties');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (properties.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-home"></i>
                        <h3>No Properties Available</h3>
                        <p>No properties match your search criteria</p>
                    </div>
                `;
                return;
            }
            
            properties.forEach(property => {
                container.innerHTML += createPropertyCard(property);
            });
            
            // Update results count
            document.getElementById('resultsCount').textContent = properties.length;
        }

        function createPropertyCard(property) {
            const isSaved = savedProperties.includes(property.id);
            return `
                <div class="property-card" onclick="viewProperty('${property.id}')">
                    <div class="property-image" style="background-image: url('${property.image}')">
                        ${property.transport ? '<div class="transport-tag"><i class="fas fa-bus"></i> Transport Available</div>' : ''}
                        <button class="save-button ${isSaved ? 'saved' : ''}" onclick="toggleSave('${property.id}', event)">
                            <i class="${isSaved ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                    </div>
                    <div class="property-content">
                        <h3 class="property-title">${property.title}</h3>
                        <div class="property-meta">
                            <span><i class="fas fa-map-marker-alt"></i> ${property.location}</span>
                            <span><i class="fas fa-bed"></i> ${property.type === 'bedsitter' ? 'Bedsitter' : 
                                                                property.type === '1bedroom' ? '1 Bedroom' :
                                                                property.type === '2bedroom' ? '2 Bedrooms' :
                                                                property.type === 'shared' ? 'Shared Room' :
                                                                property.type === 'studio' ? 'Studio' : 'House'}</span>
                        </div>
                        <div class="trust-badges">
                            ${property.verified ? '<span class="trust-badge"><i class="fas fa-shield-check"></i> Verified</span>' : ''}
                            ${property.badges.slice(0, 2).map(badge => `<span class="trust-badge blue">${badge}</span>`).join('')}
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-sm);">
                            <div class="property-price">${property.price.toLocaleString()} ZMW/month</div>
                            <div class="rating">
                                <i class="fas fa-star rating-star"></i>
                                <span class="rating-score">${property.rating}</span>
                                <span class="rating-count">(${property.reviews})</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function filterProperties() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const container = document.getElementById('featured-properties');
            
            if (!container) return;
            
            const filtered = properties.filter(p => 
                p.title.toLowerCase().includes(searchTerm) ||
                p.location.toLowerCase().includes(searchTerm) ||
                p.description.toLowerCase().includes(searchTerm) ||
                p.type.includes(searchTerm)
            ).slice(0, 3);
            
            container.innerHTML = '';
            
            if (filtered.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: var(--space-md);">
                        <i class="fas fa-search"></i>
                        <h3>No Results Found</h3>
                        <p>Try different search terms</p>
                    </div>
                `;
                return;
            }
            
            filtered.forEach(property => {
                container.innerHTML += createPropertyCard(property);
            });
        }

        function toggleSave(propertyId, event) {
            if (event) event.stopPropagation();
            
            const index = savedProperties.indexOf(propertyId);
            if (index === -1) {
                savedProperties.push(propertyId);
                showToast('Home saved to favorites!', 'success');
            } else {
                savedProperties.splice(index, 1);
                showToast('Home removed from favorites', 'success');
            }
            
            localStorage.setItem('trustay_saved', JSON.stringify(savedProperties));
            updateStats();
            
            // Update UI
            if (event) {
                const button = event.target.closest('.save-button');
                if (button) {
                    const icon = button.querySelector('i');
                    if (index === -1) {
                        button.classList.add('saved');
                        icon.className = 'fas fa-heart';
                    } else {
                        button.classList.remove('saved');
                        icon.className = 'far fa-heart';
                    }
                }
            }
            
            // Reload if on saved screen
            if (document.getElementById('saved-screen').classList.contains('active')) {
                loadSavedProperties();
            }
        }

        function loadSavedProperties() {
            const container = document.getElementById('saved-properties');
            const emptyState = document.getElementById('saved-empty');
            
            if (!container) return;
            
            container.innerHTML = '';
            
            if (savedProperties.length === 0) {
                container.style.display = 'none';
                if (emptyState) emptyState.style.display = 'block';
                return;
            }
            
            if (emptyState) emptyState.style.display = 'none';
            container.style.display = 'block';
            
            savedProperties.forEach(propertyId => {
                const property = properties.find(p => p.id === propertyId);
                if (property) {
                    container.innerHTML += createPropertyCard(property);
                }
            });
        }

        function clearSaved() {
            if (savedProperties.length === 0) return;
            
            if (confirm('Remove all saved properties?')) {
                savedProperties = [];
                localStorage.setItem('trustay_saved', JSON.stringify(savedProperties));
                showToast('All saved properties removed', 'success');
                loadSavedProperties();
                updateStats();
            }
        }

        function viewProperty(propertyId) {
            const property = properties.find(p => p.id === propertyId);
            if (!property) return;
            
            // Set current property
            window.currentProperty = property;
            currentBooking.property = property;
            
            // Update UI
            document.getElementById('property-title').textContent = property.title;
            document.getElementById('property-location').textContent = property.location;
            document.getElementById('property-description').textContent = property.description;
            document.getElementById('property-price').textContent = property.price.toLocaleString() + ' ZMW/month';
            
            // Update image
            const imageDiv = document.getElementById('property-main-image');
            imageDiv.style.backgroundImage = `url('${property.image}')`;
            
            // Update transport tag
            const transportTag = document.getElementById('property-transport-tag');
            const transportOption = document.getElementById('transport-option');
            if (property.transport) {
                transportTag.style.display = 'flex';
                transportOption.style.display = 'block';
            } else {
                transportTag.style.display = 'none';
                transportOption.style.display = 'none';
            }
            
            // Update badges
            const badgesDiv = document.getElementById('property-badges');
            badgesDiv.innerHTML = property.badges.map(badge => 
                `<span class="trust-badge ${badge.includes('Verified') || badge.includes('Inspected') ? '' : 'blue'}">${badge}</span>`
            ).join('');
            
            // Update save button
            const isSaved = savedProperties.includes(property.id);
            const saveButton = document.getElementById('property-save-button');
            const saveIcon = document.getElementById('save-icon');
            if (saveButton) {
                saveButton.innerHTML = `<i class="${isSaved ? 'fas' : 'far'} fa-heart"></i>`;
                saveButton.classList.toggle('saved', isSaved);
            }
            if (saveIcon) {
                saveIcon.className = isSaved ? 'fas fa-heart' : 'far fa-heart';
            }
            
            showScreen('property');
        }

        function toggleSaveProperty() {
            if (!window.currentProperty) return;
            const button = document.getElementById('property-save-button');
            toggleSave(window.currentProperty.id, { target: button });
        }

        function savePropertyForLater() {
            if (!window.currentProperty) return;
            toggleSaveProperty();
        }

        function shareProperty() {
            if (!window.currentProperty) return;
            showToast('Share link copied to clipboard', 'success');
            // In a real app, this would use the Web Share API or copy to clipboard
        }

        function contactOwner() {
            showToast('Calling property owner...', 'success');
            // In a real app, this would initiate a phone call
        }

        function messageOwner() {
            showModal('Message Owner', `
                <div class="form-group">
                    <label class="form-label">Your Message</label>
                    <textarea class="form-input" rows="4" placeholder="Hello, I'm interested in your property..."></textarea>
                </div>
                <button class="btn-primary" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i> Send Message
                </button>
            `);
        }

        function sendMessage() {
            hideModal();
            showToast('Message sent to owner', 'success');
        }

        // ===== TRANSPORT FUNCTIONS =====
        function loadTransportRoutes() {
            // Routes are loaded in the HTML
        }

        function selectTransport(routeId, element) {
            const route = transportRoutes.find(r => r.id === routeId);
            if (!route) return;
            
            // Update UI
            document.querySelectorAll('.transport-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            if (element) {
                element.classList.add('selected');
            }
            
            currentBooking.transportRoute = route;
            currentBooking.includeTransport = true;
            
            showToast(`Selected ${route.name} route`, 'success');
        }

        function showTransportBooking() {
            showModal('Book Transport', `
                <div class="form-group">
                    <label class="form-label">Select Route</label>
                    <select class="form-input" id="modalTransportRoute">
                        ${transportRoutes.map(route => 
                            `<option value="${route.id}">${route.name} - ${route.price} ZMW/month</option>`
                        ).join('')}
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Start Date</label>
                    <input type="date" class="form-input" id="modalTransportDate">
                </div>
                <div class="form-group">
                    <label class="form-label">Payment Method</label>
                    <select class="form-input">
                        <option>Mobile Money</option>
                        <option>Bank Transfer</option>
                        <option>Cash</option>
                    </select>
                </div>
                <button class="btn-primary" onclick="bookTransport()">
                    <i class="fas fa-check"></i> Confirm Transport Booking
                </button>
            `);
            
            // Set min date to tomorrow
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('modalTransportDate').min = tomorrow.toISOString().split('T')[0];
            document.getElementById('modalTransportDate').value = tomorrow.toISOString().split('T')[0];
        }

        function bookTransport() {
            hideModal();
            showToast('Transport subscription activated!', 'success');
        }

        function toggleTransportOption(include) {
            const yesBtn = document.getElementById('transportYes');
            const noBtn = document.getElementById('transportNo');
            const details = document.getElementById('transportDetails');
            
            if (include) {
                yesBtn.className = 'btn-primary';
                noBtn.className = 'btn-secondary';
                details.style.display = 'block';
            } else {
                yesBtn.className = 'btn-secondary';
                noBtn.className = 'btn-primary';
                details.style.display = 'none';
            }
        }

        // ===== BOOKING FLOW =====
        function startBooking() {
            if (!window.currentProperty) return;
            
            // Reset booking steps
            document.querySelectorAll('.booking-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById('step1').classList.add('active');
            
            // Reset step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index === 0) step.classList.add('active');
            });
            
            // Initialize booking summary
            updateBookingSummary();
            
            showScreen('booking');
        }

        function nextStep(step) {
            // Validate current step
            if (step === 2) {
                const moveInDate = document.getElementById('move-in-date').value;
                if (!moveInDate) {
                    showToast('Please select a move-in date', 'error');
                    return;
                }
                currentBooking.moveInDate = moveInDate;
                currentBooking.duration = parseInt(document.getElementById('duration').value);
            }
            
            if (step === 3) {
                const transportSelected = document.querySelector('input[name="transport"]:checked').value === 'yes';
                currentBooking.includeTransport = transportSelected;
            }
            
            // Hide all steps
            document.querySelectorAll('.booking-step').forEach(s => {
                s.classList.remove('active');
            });
            
            // Update step indicators
            document.querySelectorAll('.step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                }
            });
            
            // Show target step
            document.getElementById('step' + step).classList.add('active');
            
            // Update summary if step 3
            if (step === 3) {
                updateFinalBookingSummary();
            }
        }

        function prevStep(step) {
            // Hide all steps
            document.querySelectorAll('.booking-step').forEach(s => {
                s.classList.remove('active');
            });
            
            // Update step indicators
            document.querySelectorAll('.step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                }
            });
            
            // Show target step
            document.getElementById('step' + step).classList.add('active');
        }

        function updateBookingSummary() {
            if (!window.currentProperty) return;
            
            const duration = parseInt(document.getElementById('duration').value);
            const rent = window.currentProperty.price;
            const subtotal = rent * duration;
            
            document.getElementById('summary-duration-display').textContent = duration + ' month' + (duration !== 1 ? 's' : '');
            document.getElementById('summary-rent').textContent = rent.toLocaleString() + ' ZMW';
            document.getElementById('summary-subtotal').textContent = subtotal.toLocaleString() + ' ZMW';
        }

        function updateTransportSelection(include) {
            const transportYes = document.getElementById('transport-yes-label');
            const transportNo = document.getElementById('transport-no-label');
            
            if (include) {
                transportYes.style.backgroundColor = 'rgba(37, 99, 235, 0.1)';
                transportNo.style.backgroundColor = 'transparent';
            } else {
                transportYes.style.backgroundColor = 'transparent';
                transportNo.style.backgroundColor = 'rgba(11, 31, 59, 0.05)';
            }
        }

        function updateFinalBookingSummary() {
            if (!currentBooking.property) return;
            
            const duration = currentBooking.duration;
            const rent = currentBooking.property.price;
            const transportCost = currentBooking.includeTransport ? 150 : 0;
            const total = (rent + transportCost) * duration;
            
            document.getElementById('summary-duration-final').textContent = duration + ' month' + (duration !== 1 ? 's' : '');
            document.getElementById('summary-transport-final').textContent = transportCost > 0 ? transportCost.toLocaleString() + ' ZMW' : 'No transport';
            document.getElementById('summary-total-final').textContent = total.toLocaleString() + ' ZMW';
        }

        function selectPaymentMethod(method, element) {
            currentBooking.paymentMethod = method;
            
            // Update UI
            document.querySelectorAll('.payment-method').forEach(method => {
                method.classList.remove('selected');
            });
            
            if (element) {
                element.classList.add('selected');
            }
        }

        function confirmBooking() {
            // Create booking record
            const booking = {
                id: 'BK' + Date.now(),
                propertyId: currentBooking.property.id,
                propertyTitle: currentBooking.property.title,
                moveInDate: currentBooking.moveInDate,
                duration: currentBooking.duration,
                includeTransport: currentBooking.includeTransport,
                transportCost: currentBooking.includeTransport ? 150 : 0,
                totalAmount: (currentBooking.property.price + (currentBooking.includeTransport ? 150 : 0)) * currentBooking.duration,
                paymentMethod: currentBooking.paymentMethod,
                status: 'pending',
                date: new Date().toLocaleDateString(),
                timestamp: Date.now()
            };
            
            // Save to bookings
            bookings.push(booking);
            localStorage.setItem('trustay_bookings', JSON.stringify(bookings));
            
            // Update confirmed property name
            document.getElementById('confirmed-property').textContent = currentBooking.property.title;
            
            // Show confirmation screen
            showScreen('confirmation');
            
            // Show success message
            showToast('Booking request sent successfully!', 'success');
        }

        // ===== OWNER FUNCTIONS =====
        function loadOwnerDashboard() {
            // Load owner bookings
            const container = document.getElementById('owner-bookings-list');
            if (!container) return;
            
            const ownerBookings = bookings.slice(0, 3); // Get recent bookings
            
            container.innerHTML = '';
            
            if (ownerBookings.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: var(--space-md);">
                        <i class="fas fa-calendar"></i>
                        <h3>No Bookings Yet</h3>
                        <p>When tenants book your properties, they'll appear here</p>
                    </div>
                `;
                return;
            }
            
            ownerBookings.forEach(booking => {
                const property = properties.find(p => p.id === booking.propertyId);
                if (property) {
                    container.innerHTML += `
                        <div class="property-list-item" onclick="viewOwnerBooking('${booking.id}')">
                            <div class="property-list-image" style="background-image: url('${property.image}')"></div>
                            <div class="property-list-details">
                                <h4>${property.title}</h4>
                                <p>${booking.moveInDate} • ${booking.duration} months</p>
                                <div class="property-list-status ${booking.status}">${booking.status}</div>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function showOwnerAddProperty() {
            showScreen('owner-add-property');
        }

        function showOwnerProperties() {
            showModal('My Properties', `
                <div class="property-list">
                    <div class="property-list-item">
                        <div class="property-list-image" style="background-image: url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')"></div>
                        <div class="property-list-details">
                            <h4>Modern Bedsitter near UNZA</h4>
                            <p>Woodlands, Lusaka • 850 ZMW/month</p>
                            <div class="property-list-status">Active</div>
                        </div>
                    </div>
                    <div class="property-list-item">
                        <div class="property-list-image" style="background-image: url('https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')"></div>
                        <div class="property-list-details">
                            <h4>Cozy 1-Bedroom in Ridgeway</h4>
                            <p>Ridgeway, Lusaka • 1200 ZMW/month</p>
                            <div class="property-list-status">Active</div>
                        </div>
                    </div>
                </div>
                <button class="btn-primary" onclick="showOwnerAddProperty()" style="margin-top: var(--space-md);">
                    <i class="fas fa-plus"></i> Add New Property
                </button>
            `);
        }

        function showOwnerBookings() {
            showModal('Booking Requests', `
                <div class="property-list">
                    <div class="property-list-item">
                        <div class="property-list-image" style="background-image: url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')"></div>
                        <div class="property-list-details">
                            <h4>John Banda</h4>
                            <p>Modern Bedsitter • Move-in: 15 Mar 2024</p>
                            <div class="property-list-status pending">Pending</div>
                        </div>
                    </div>
                    <div class="property-list-item">
                        <div class="property-list-image" style="background-image: url('https://images.unsplash.com/photo-1555854877-bab0e564b8d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80')"></div>
                        <div class="property-list-details">
                            <h4>Sarah Mwape</h4>
                            <p>Cozy 1-Bedroom • Move-in: 20 Mar 2024</p>
                            <div class="property-list-status">Confirmed</div>
                        </div>
                    </div>
                </div>
            `);
        }

        function showOwnerVerification() {
            showModal('Owner Verification', `
                <div style="text-align: center; margin-bottom: var(--space-lg);">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--trust-green), #34d399); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto var(--space-md);">
                        <i class="fas fa-badge-check"></i>
                    </div>
                    <h3 style="color: var(--text-primary);">Trustay Verified Owner</h3>
                    <p style="color: var(--text-secondary);">Your account is fully verified</p>
                </div>
                <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Verification Status</h4>
                    <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm);">
                        <div style="display: flex; justify-content: space-between; padding: var(--space-xs) 0; border-bottom: 1px solid var(--border-soft);">
                            <span style="color: var(--text-secondary);">ID Verification:</span>
                            <span style="color: var(--trust-green); font-weight: 700;">Verified</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: var(--space-xs) 0; border-bottom: 1px solid var(--border-soft);">
                            <span style="color: var(--text-secondary);">Property Inspection:</span>
                            <span style="color: var(--trust-green); font-weight: 700;">Completed</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: var(--space-xs) 0;">
                            <span style="color: var(--text-secondary);">Bank Details:</span>
                            <span style="color: var(--trust-green); font-weight: 700;">Verified</span>
                        </div>
                    </div>
                </div>
                <p style="color: var(--text-secondary); font-size: 14px; margin-top: var(--space-md); text-align: center;">
                    <i class="fas fa-shield-alt"></i> Verification ensures trust and safety for all users
                </p>
            `);
        }

        function viewOwnerBooking(bookingId) {
            const booking = bookings.find(b => b.id === bookingId);
            if (booking) {
                showModal('Booking Details', `
                    <h3 style="margin-bottom: var(--space-md); color: var(--text-primary);">Booking Details</h3>
                    <div style="background: var(--light-bg); border-radius: var(--radius); padding: var(--space-md); margin-bottom: var(--space-md);">
                        <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm);">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-secondary);">Tenant:</span>
                                <span style="font-weight: 700; color: var(--text-primary);">John Banda</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-secondary);">Move-in Date:</span>
                                <span style="font-weight: 700; color: var(--text-primary);">${booking.moveInDate}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-secondary);">Duration:</span>
                                <span style="font-weight: 700; color: var(--text-primary);">${booking.duration} months</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-secondary);">Total Amount:</span>
                                <span style="font-weight: 700; color: var(--text-primary);">${booking.totalAmount.toLocaleString()} ZMW</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-secondary);">Status:</span>
                                <span class="property-list-status ${booking.status}" style="display: inline-block;">${booking.status}</span>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; gap: var(--space-sm);">
                        <button class="btn-secondary" style="flex: 1;" onclick="updateBookingStatus('${bookingId}', 'rejected')">
                            Reject
                        </button>
                        <button class="btn-primary" style="flex: 1;" onclick="updateBookingStatus('${bookingId}', 'confirmed')">
                            Confirm
                        </button>
                    </div>
                `);
            }
        }

        function updateBookingStatus(bookingId, status) {
            const booking = bookings.find(b => b.id === bookingId);
            if (booking) {
                booking.status = status;
                localStorage.setItem('trustay_bookings', JSON.stringify(bookings));
                hideModal();
                showToast(`Booking ${status}`, 'success');
                loadOwnerDashboard();
            }
        }

        function addAmenity() {
            const input = document.getElementById('amenityInput');
            const value = input.value.trim();
            if (!value) return;
            
            const container = document.getElementById('amenitiesInput');
            const tag = document.createElement('div');
            tag.className = 'tag';
            tag.innerHTML = `
                ${value}
                <button type="button" class="tag-remove" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            container.appendChild(tag);
            input.value = '';
        }

        function submitProperty(event) {
            if (event) event.preventDefault();
            
            showToast('Property listed successfully!', 'success');
            setTimeout(() => {
                showScreen('owner-dashboard');
            }, 1500);
        }

        // ===== FILTER FUNCTIONS =====
        function toggleFilters() {
            const filters = document.getElementById('filters-panel');
            filters.style.display = filters.style.display === 'none' ? 'block' : 'none';
        }

        function toggleFilter(type, value) {
            // This would filter properties in a real implementation
            showToast(`Filter applied: ${value}`, 'success');
        }

        function updatePriceFilter(value) {
            document.getElementById('priceFilterValue').textContent = value;
        }

        function filterByLocation(location) {
            if (!location) return;
            showToast(`Filtering by location: ${location}`, 'success');
        }

        function toggleVerifiedOnly(checked) {
            showToast(checked ? 'Showing verified only' : 'Showing all properties', 'success');
        }

        function toggleTransportFilter(checked) {
            showToast(checked ? 'Showing with transport' : 'Showing all properties', 'success');
        }

        function applyFilters() {
            showToast('Filters applied successfully', 'success');
            toggleFilters(); // Hide filters
        }

        function clearFilters() {
            showToast('Filters cleared', 'success');
            toggleFilters(); // Hide filters
        }

        function changeSort(sortBy) {
            showToast(`Sorted by ${sortBy}`, 'success');
        }

        function changeView() {
            showToast('View changed', 'success');
        }

        // ===== PROFILE FUNCTIONS =====
        function showBookings() {
            if (bookings.length === 0) {
                showToast('No bookings yet', 'info');
            } else {
                showModal('My Bookings', `
                    <div class="property-list">
                        ${bookings.map(booking => {
                            const property = properties.find(p => p.id === booking.propertyId);
                            return property ? `
                                <div class="property-list-item">
                                    <div class="property-list-image" style="background-image: url('${property.image}')"></div>
                                    <div class="property-list-details">
                                        <h4>${property.title}</h4>
                                        <p>${booking.moveInDate} • ${booking.duration} months</p>
                                        <div class="property-list-status ${booking.status}">${booking.status}</div>
                                    </div>
                                </div>
                            ` : '';
                        }).join('')}
                    </div>
                `);
            }
        }

        function showPaymentMethods() {
            showModal('Payment Methods', `
                <div style="margin-bottom: var(--space-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Saved Methods</h4>
                    <div class="payment-methods">
                        <div class="payment-method selected">
                            <i class="fas fa-university"></i>
                            <h4>Bank Transfer</h4>
                            <p>ZANACO ••••1234</p>
                        </div>
                        <div class="payment-method">
                            <i class="fas fa-mobile-alt"></i>
                            <h4>Mobile Money</h4>
                            <p>MTN ••••5678</p>
                        </div>
                    </div>
                </div>
                <button class="btn-primary">
                    <i class="fas fa-plus"></i> Add Payment Method
                </button>
            `);
        }

        function showHelp() {
            showModal('Help Center', `
                <div style="margin-bottom: var(--space-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Frequently Asked Questions</h4>
                    <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm);">
                        <div style="padding: var(--space-sm); background: var(--light-bg); border-radius: var(--radius);">
                            <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">How do I book a property?</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">Click "Book Viewing" on any property to start the booking process.</div>
                        </div>
                        <div style="padding: var(--space-sm); background: var(--light-bg); border-radius: var(--radius);">
                            <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">What is Trustay Transport?</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">Monthly subscription service for safe commuting to universities and workplaces.</div>
                        </div>
                        <div style="padding: var(--space-sm); background: var(--light-bg); border-radius: var(--radius);">
                            <div style="font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">How are properties verified?</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">Every property undergoes inspection and owner verification for safety.</div>
                        </div>
                    </div>
                </div>
                <button class="btn-primary">
                    <i class="fas fa-headset"></i> Contact Support
                </button>
            `);
        }

        function showSupport() {
            showModal('Contact Support', `
                <div style="text-align: center; margin-bottom: var(--space-lg);">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--accent-blue), #3b82f6); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto var(--space-md);">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 style="color: var(--text-primary);">24/7 Support</h3>
                    <p style="color: var(--text-secondary);">We're here to help you anytime</p>
                </div>
                <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm); margin-bottom: var(--space-lg);">
                    <a href="tel:260961234567" style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius); text-decoration: none; color: var(--text-primary);">
                        <i class="fas fa-phone" style="color: var(--accent-blue);"></i>
                        <div>
                            <div style="font-weight: 700;">Call Us</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">+260 96 123 4567</div>
                        </div>
                    </a>
                    <a href="mailto:support@trustay.co.zm" style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius); text-decoration: none; color: var(--text-primary);">
                        <i class="fas fa-envelope" style="color: var(--trust-green);"></i>
                        <div>
                            <div style="font-weight: 700;">Email Us</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">support@trustay.co.zm</div>
                        </div>
                    </a>
                    <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-md); background: var(--light-bg); border-radius: var(--radius);">
                        <i class="fas fa-comment" style="color: var(--warning-orange);"></i>
                        <div>
                            <div style="font-weight: 700;">Live Chat</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">Available 24/7 in app</div>
                        </div>
                    </div>
                </div>
            `);
        }

        function showSafety() {
            showModal('Safety Center', `
                <div style="text-align: center; margin-bottom: var(--space-lg);">
                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--trust-green), #34d399); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto var(--space-md);">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 style="color: var(--text-primary);">Trust & Safety</h3>
                    <p style="color: var(--text-secondary);">Your safety is our priority</p>
                </div>
                <div style="margin-bottom: var(--space-lg);">
                    <h4 style="margin-bottom: var(--space-sm); color: var(--text-primary);">Safety Features</h4>
                    <div style="display: grid; grid-template-columns: 1fr; gap: var(--space-sm);">
                        <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm);">
                            <i class="fas fa-user-check" style="color: var(--trust-green);"></i>
                            <span style="color: var(--text-primary); font-weight: 600;">Verified Users Only</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm);">
                            <i class="fas fa-home" style="color: var(--accent-blue);"></i>
                            <span style="color: var(--text-primary); font-weight: 600;">Property Inspections</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm);">
                            <i class="fas fa-lock" style="color: var(--warning-orange);"></i>
                            <span style="color: var(--text-primary); font-weight: 600;">Secure Payments</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-sm); padding: var(--space-sm);">
                            <i class="fas fa-headset" style="color: #8B5CF6;"></i>
                            <span style="color: var(--text-primary); font-weight: 600;">24/7 Support</span>
                        </div>
                    </div>
                </div>
                <button class="btn-primary">
                    <i class="fas fa-book"></i> Read Safety Guidelines
                </button>
            `);
        }

        // ===== UTILITY FUNCTIONS =====
        function updateGreeting() {
            if (!currentUser) return;
            
            const hour = new Date().getHours();
            let greeting = 'Good evening';
            if (hour < 12) greeting = 'Good morning';
            else if (hour < 18) greeting = 'Good afternoon';
            
            document.getElementById('greeting-text').textContent = `${greeting}, ${currentUser.name.split(' ')[0]}!`;
            document.getElementById('profile-name').textContent = currentUser.name;
            
            const roleElement = document.getElementById('profile-role');
            if (roleElement) {
                roleElement.innerHTML = currentUser.role === 'owner' 
                    ? '<i class="fas fa-building"></i> Property Owner'
                    : `<i class="fas fa-user-check"></i> ${currentUser.institution || 'Trustay Member'}`;
            }
        }

        function updateStats() {
            document.getElementById('verified-homes').textContent = properties.filter(p => p.verified).length;
            document.getElementById('transport-routes').textContent = transportRoutes.length;
            document.getElementById('saved-count').textContent = savedProperties.length;
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
            input.setAttribute('type', type);
        }

        function showModal(title, content) {
            const modal = document.getElementById('modalContent');
            modal.innerHTML = `
                <div class="modal-header">
                    <h3>${title}</h3>
                    <button class="modal-close" onclick="hideModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div>
                    ${content}
                </div>
            `;
            document.getElementById('modalOverlay').classList.add('active');
        }

        function hideModal() {
            document.getElementById('modalOverlay').classList.remove('active');
        }

        function showToast(message, type = 'success') {
            // Remove existing toasts
            document.querySelectorAll('.toast').forEach(toast => toast.remove());
            
            // Create new toast
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                  type === 'error' ? 'exclamation-circle' : 
                                  type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.animation = 'slideDown 0.3s ease reverse forwards';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Close modal when clicking outside
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                hideModal();
            }
        });

        // Prevent modal close when clicking inside modal
        document.getElementById('modalContent').addEventListener('click', function(e) {
            e.stopPropagation();
        });
    </script>
</body>
</html>
